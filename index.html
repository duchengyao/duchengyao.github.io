<!DOCTYPE html>
<html lang="zh-CN">
<head>
  <meta charset="UTF-8">
<meta name="viewport" content="width=device-width">
<meta name="theme-color" content="#222"><meta name="generator" content="Hexo 6.2.0">


  <link rel="apple-touch-icon" sizes="180x180" href="/images/apple-touch-icon.png">
  <link rel="icon" type="image/png" sizes="32x32" href="/images/favicon-32x32.png">
  <link rel="icon" type="image/png" sizes="16x16" href="/images/favicon-16x16.png">
  <link rel="mask-icon" href="/images/safari-pinned-tab.svg" color="#222">
  <link rel="manifest" href="/images/site.webmanifest">

<link rel="stylesheet" href="/css/main.css">



<link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.1.2/css/all.min.css" integrity="sha256-xejo6yLi6vGtAjcMIsY8BHdKsLg7QynVlFMzdQgUuy8=" crossorigin="anonymous">
  <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/fancybox/3.5.7/jquery.fancybox.min.css" integrity="sha256-Vzbj7sDDS/woiFS3uNKo8eIuni59rjyNGtXfstRzStA=" crossorigin="anonymous">

<script class="next-config" data-name="main" type="application/json">{"hostname":"s1nh.org","root":"/","images":"/images","scheme":"Gemini","darkmode":false,"version":"8.12.3","exturl":false,"sidebar":{"position":"left","display":"post","padding":18,"offset":12},"copycode":{"enable":true,"style":null},"bookmark":{"enable":false,"color":"#222","save":"auto"},"mediumzoom":false,"lazyload":true,"pangu":false,"comments":{"style":"tabs","active":null,"storage":true,"lazyload":false,"nav":null},"stickytabs":false,"motion":{"enable":false,"async":true,"transition":{"post_block":"fadeIn","post_header":"fadeInDown","post_body":"fadeInDown","coll_header":"fadeInLeft","sidebar":"fadeInUp"}},"prism":false,"i18n":{"placeholder":"搜索...","empty":"没有找到任何搜索结果：${query}","hits_time":"找到 ${hits} 个搜索结果（用时 ${time} 毫秒）","hits":"找到 ${hits} 个搜索结果"},"path":"/search.xml","localsearch":{"enable":true,"trigger":"auto","top_n_per_article":1,"unescape":false,"preload":false}}</script><script src="/js/config.js"></script>

    <meta name="description" content="no other developers required.">
<meta property="og:type" content="website">
<meta property="og:title" content="S1NH">
<meta property="og:url" content="http://s1nh.org/index.html">
<meta property="og:site_name" content="S1NH">
<meta property="og:description" content="no other developers required.">
<meta property="og:locale" content="zh_CN">
<meta property="article:author" content="S1NH">
<meta name="twitter:card" content="summary">


<link rel="canonical" href="http://s1nh.org/">



<script class="next-config" data-name="page" type="application/json">{"sidebar":"","isHome":true,"isPost":false,"lang":"zh-CN","comments":"","permalink":"","path":"index.html","title":""}</script>

<script class="next-config" data-name="calendar" type="application/json">""</script>
<title>S1NH</title>
  
    <script async src="https://www.googletagmanager.com/gtag/js?id=G-44KGHGDYG3"></script>
  <script class="next-config" data-name="google_analytics" type="application/json">{"tracking_id":"G-44KGHGDYG3","only_pageview":false}</script>
  <script src="/js/third-party/analytics/google-analytics.js"></script>

  <script src="/js/third-party/analytics/baidu-analytics.js"></script>
  <script async src="https://hm.baidu.com/hm.js?4c66a84272e0f7943a305accf6dbdf41"></script>




  <noscript>
    <link rel="stylesheet" href="/css/noscript.css">
  </noscript>
</head>

<body itemscope itemtype="http://schema.org/WebPage">
  <div class="headband"></div>

  <main class="main">
    <header class="header" itemscope itemtype="http://schema.org/WPHeader">
      <div class="header-inner"><div class="site-brand-container">
  <div class="site-nav-toggle">
    <div class="toggle" aria-label="切换导航栏" role="button">
        <span class="toggle-line"></span>
        <span class="toggle-line"></span>
        <span class="toggle-line"></span>
    </div>
  </div>

  <div class="site-meta">

    <a href="/" class="brand" rel="start">
      <i class="logo-line"></i>
      <h1 class="site-title">S1NH</h1>
      <i class="logo-line"></i>
    </a>
      <p class="site-subtitle" itemprop="description">世界在旅程的尽头终结</p>
  </div>

  <div class="site-nav-right">
    <div class="toggle popup-trigger">
        <i class="fa fa-search fa-fw fa-lg"></i>
    </div>
  </div>
</div>



<nav class="site-nav">
  <ul class="main-menu menu"><li class="menu-item menu-item-home"><a href="/" rel="section"><i class="fa fa-home fa-fw"></i>首页</a></li><li class="menu-item menu-item-categories"><a href="/categories/" rel="section"><i class="fa fa-th fa-fw"></i>分类</a></li><li class="menu-item menu-item-archives"><a href="/archives/" rel="section"><i class="fa fa-archive fa-fw"></i>归档</a></li><li class="menu-item menu-item-about"><a href="/about/" rel="section"><i class="fa fa-user fa-fw"></i>关于</a></li>
      <li class="menu-item menu-item-search">
        <a role="button" class="popup-trigger"><i class="fa fa-search fa-fw"></i>搜索
        </a>
      </li>
  </ul>
</nav>



  <div class="search-pop-overlay">
    <div class="popup search-popup"><div class="search-header">
  <span class="search-icon">
    <i class="fa fa-search"></i>
  </span>
  <div class="search-input-container">
    <input autocomplete="off" autocapitalize="off" maxlength="80"
           placeholder="搜索..." spellcheck="false"
           type="search" class="search-input">
  </div>
  <span class="popup-btn-close" role="button">
    <i class="fa fa-times-circle"></i>
  </span>
</div>
<div class="search-result-container no-result">
  <div class="search-result-icon">
    <i class="fa fa-spinner fa-pulse fa-5x"></i>
  </div>
</div>

    </div>
  </div>

</div>
        
  
  <div class="toggle sidebar-toggle" role="button">
    <span class="toggle-line"></span>
    <span class="toggle-line"></span>
    <span class="toggle-line"></span>
  </div>

  <aside class="sidebar">

    <div class="sidebar-inner sidebar-overview-active">
      <ul class="sidebar-nav">
        <li class="sidebar-nav-toc">
          文章目录
        </li>
        <li class="sidebar-nav-overview">
          站点概览
        </li>
      </ul>

      <div class="sidebar-panel-container">
        <!--noindex-->
        <div class="post-toc-wrap sidebar-panel">
        </div>
        <!--/noindex-->

        <div class="site-overview-wrap sidebar-panel">
          <div class="site-author site-overview-item animated" itemprop="author" itemscope itemtype="http://schema.org/Person">
    <img class="site-author-image" itemprop="image" alt="S1NH"
      src="/images/avatar.jpg">
  <p class="site-author-name" itemprop="name">S1NH</p>
  <div class="site-description" itemprop="description">no other developers required.</div>
</div>
<div class="site-state-wrap site-overview-item animated">
  <nav class="site-state">
      <div class="site-state-item site-state-posts">
        <a href="/archives/">
          <span class="site-state-item-count">101</span>
          <span class="site-state-item-name">日志</span>
        </a>
      </div>
      <div class="site-state-item site-state-categories">
          <a href="/categories/">
        <span class="site-state-item-count">4</span>
        <span class="site-state-item-name">分类</span></a>
      </div>
      <div class="site-state-item site-state-tags">
          <a href="/tags/">
        <span class="site-state-item-count">84</span>
        <span class="site-state-item-name">标签</span></a>
      </div>
  </nav>
</div>
  <div class="cc-license site-overview-item animated" itemprop="license">
    <a href="https://creativecommons.org/licenses/by-nc-sa/4.0/" class="cc-opacity" rel="noopener" target="_blank"><img src="https://cdnjs.cloudflare.com/ajax/libs/creativecommons-vocabulary/2020.11.3/assets/license_badges/small/by_nc_sa.svg" alt="Creative Commons"></a>
  </div>


  <div class="links-of-blogroll site-overview-item animated">
    <div class="links-of-blogroll-title"><i class="fa fa-globe fa-fw"></i>
      Links
    </div>
    <ul class="links-of-blogroll-list">
        <li class="links-of-blogroll-item">
          <a href="https://www.92ez.com/" title="https:&#x2F;&#x2F;www.92ez.com&#x2F;" rel="noopener" target="_blank">一只猿</a>
        </li>
        <li class="links-of-blogroll-item">
          <a href="http://codewithzhangyi.com/about/" title="http:&#x2F;&#x2F;codewithzhangyi.com&#x2F;about&#x2F;" rel="noopener" target="_blank">好奇心狂热分子</a>
        </li>
        <li class="links-of-blogroll-item">
          <a href="http://s1nh.com/" title="http:&#x2F;&#x2F;s1nh.com&#x2F;" rel="noopener" target="_blank">本站 github 镜像</a>
        </li>
        <li class="links-of-blogroll-item">
          <a href="http://s1nh.org/" title="http:&#x2F;&#x2F;s1nh.org&#x2F;">本站国内镜像</a>
        </li>
    </ul>
  </div><div>
<hr>
<img src="/images/wechatpay-ss.jpg" alt="Buy me a SSRI.">
</div>

<script async src="https://pagead2.googlesyndication.com/pagead/js/adsbygoogle.js?client=ca-pub-7052751443200899"
     crossorigin="anonymous"></script>
        </div>
      </div>
    </div>
  </aside>
  <div class="sidebar-dimmer"></div>


    </header>

    
  <div class="back-to-top" role="button" aria-label="返回顶部">
    <i class="fa fa-arrow-up"></i>
    <span>0%</span>
  </div>

  <a href="https://github.com/duchengyao" class="github-corner" title="Follow me on GitHub" aria-label="Follow me on GitHub" rel="noopener" target="_blank"><svg width="80" height="80" viewBox="0 0 250 250" aria-hidden="true"><path d="M0,0 L115,115 L130,115 L142,142 L250,250 L250,0 Z"></path><path d="M128.3,109.0 C113.8,99.7 119.0,89.6 119.0,89.6 C122.0,82.7 120.5,78.6 120.5,78.6 C119.2,72.0 123.4,76.3 123.4,76.3 C127.3,80.9 125.5,87.3 125.5,87.3 C122.9,97.6 130.6,101.9 134.4,103.2" fill="currentColor" style="transform-origin: 130px 106px;" class="octo-arm"></path><path d="M115.0,115.0 C114.9,115.1 118.7,116.5 119.8,115.4 L133.7,101.6 C136.9,99.2 139.9,98.4 142.2,98.6 C133.8,88.0 127.5,74.4 143.8,58.0 C148.5,53.4 154.0,51.2 159.7,51.0 C160.3,49.4 163.2,43.6 171.4,40.1 C171.4,40.1 176.1,42.5 178.8,56.2 C183.1,58.6 187.2,61.8 190.9,65.4 C194.5,69.0 197.7,73.2 200.1,77.6 C213.8,80.2 216.3,84.9 216.3,84.9 C212.7,93.1 206.9,96.0 205.4,96.6 C205.1,102.4 203.0,107.8 198.3,112.5 C181.9,128.9 168.3,122.5 157.7,114.1 C157.9,116.9 156.7,120.9 152.7,124.9 L141.0,136.5 C139.8,137.7 141.6,141.9 141.8,141.8 Z" fill="currentColor" class="octo-body"></path></svg></a>

<noscript>
  <div class="noscript-warning">Theme NexT works best with JavaScript enabled</div>
</noscript>


    <div class="main-inner index posts-expand">

    


<div class="post-block">
  
  

  <article itemscope itemtype="http://schema.org/Article" class="post-content" lang="">
    <link itemprop="mainEntityOfPage" href="http://s1nh.org/post/996-ICU/">

    <span hidden itemprop="author" itemscope itemtype="http://schema.org/Person">
      <meta itemprop="image" content="/images/avatar.jpg">
      <meta itemprop="name" content="S1NH">
    </span>

    <span hidden itemprop="publisher" itemscope itemtype="http://schema.org/Organization">
      <meta itemprop="name" content="S1NH">
      <meta itemprop="description" content="no other developers required.">
    </span>

    <span hidden itemprop="post" itemscope itemtype="http://schema.org/CreativeWork">
      <meta itemprop="name" content="undefined | S1NH">
      <meta itemprop="description" content="">
    </span>
      <header class="post-header">
        <h2 class="post-title" itemprop="name headline">
          <a href="/post/996-ICU/" class="post-title-link" itemprop="url">996.ICU</a>
        </h2>

        <div class="post-meta-container">
          <div class="post-meta">
    <span class="post-meta-item">
      <span class="post-meta-item-icon">
        <i class="far fa-calendar"></i>
      </span>
      <span class="post-meta-item-text">发表于</span>

      <time title="创建时间：9969-09-06 00:04:44" itemprop="dateCreated datePublished" datetime="9969-09-06T00:04:44+08:00">9969-09-06</time>
    </span>
    <span class="post-meta-item">
      <span class="post-meta-item-icon">
        <i class="far fa-folder"></i>
      </span>
      <span class="post-meta-item-text">分类于</span>
        <span itemprop="about" itemscope itemtype="http://schema.org/Thing">
          <a href="/categories/other/" itemprop="url" rel="index"><span itemprop="name">其它笔记</span></a>
        </span>
    </span>

  
</div>

        </div>
      </header>

    
    
    
    <div class="post-body" itemprop="articleBody">
          <p><strong>一位保守党政客讲得再清楚不过，穷人全都“必须要不断地吃，不断地喝，不断地工作，不断地死去”。</strong></p>
          <!--noindex-->
            <div class="post-button">
              <a class="btn" href="/post/996-ICU/#more" rel="contents">
                阅读全文 &raquo;
              </a>
            </div>
          <!--/noindex-->
        
      
    </div>

    
    
    

    <footer class="post-footer">
        <div class="post-eof"></div>
      
    </footer>
  </article>
</div>




    


<div class="post-block">
  
  

  <article itemscope itemtype="http://schema.org/Article" class="post-content" lang="">
    <link itemprop="mainEntityOfPage" href="http://s1nh.org/post/network-tips/">

    <span hidden itemprop="author" itemscope itemtype="http://schema.org/Person">
      <meta itemprop="image" content="/images/avatar.jpg">
      <meta itemprop="name" content="S1NH">
    </span>

    <span hidden itemprop="publisher" itemscope itemtype="http://schema.org/Organization">
      <meta itemprop="name" content="S1NH">
      <meta itemprop="description" content="no other developers required.">
    </span>

    <span hidden itemprop="post" itemscope itemtype="http://schema.org/CreativeWork">
      <meta itemprop="name" content="undefined | S1NH">
      <meta itemprop="description" content="">
    </span>
      <header class="post-header">
        <h2 class="post-title" itemprop="name headline">
          <a href="/post/network-tips/" class="post-title-link" itemprop="url">一些小技巧</a>
        </h2>

        <div class="post-meta-container">
          <div class="post-meta">
    <span class="post-meta-item">
      <span class="post-meta-item-icon">
        <i class="far fa-calendar"></i>
      </span>
      <span class="post-meta-item-text">发表于</span>

      <time title="创建时间：2023-02-27 20:03:13" itemprop="dateCreated datePublished" datetime="2023-02-27T20:03:13+08:00">2023-02-27</time>
    </span>
    <span class="post-meta-item">
      <span class="post-meta-item-icon">
        <i class="far fa-folder"></i>
      </span>
      <span class="post-meta-item-text">分类于</span>
        <span itemprop="about" itemscope itemtype="http://schema.org/Thing">
          <a href="/categories/programming/" itemprop="url" rel="index"><span itemprop="name">算法与硬件</span></a>
        </span>
    </span>

  
</div>

        </div>
      </header>

    
    
    
    <div class="post-body" itemprop="articleBody">
          <h2 id="linux-中通过非-root-账户使用-ifconfig-设置-ip-的方法"><a href="#linux-中通过非-root-账户使用-ifconfig-设置-ip-的方法" class="headerlink" title="linux 中通过非 root 账户使用 ifconfig 设置 ip 的方法"></a>linux 中通过非 root 账户使用 ifconfig 设置 ip 的方法</h2><ol>
<li>创建一个 ifconfig 的副本；</li>
<li>通过 setcap 向副本授予 CAP_NET_ADMIN 能力，而不必授予 root（用户 ID 0）的完整权限；</li>
<li>为了避免非法用户使用这个副本来修改网络，需要给ifconfig副本设置新的权限，仅允许该组的成员执行。</li>
</ol>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line">cp /sbin/ifconfig .</span><br><span class="line">sudo setcap cap_net_admin=eip ./ifconfig</span><br><span class="line">./ifconfig eth0 1.2.3.4    # succeeds</span><br><span class="line">chmod 750 ./ifconfig</span><br></pre></td></tr></table></figure>


      
    </div>

    
    
    

    <footer class="post-footer">
        <div class="post-eof"></div>
      
    </footer>
  </article>
</div>




    


<div class="post-block">
  
  

  <article itemscope itemtype="http://schema.org/Article" class="post-content" lang="">
    <link itemprop="mainEntityOfPage" href="http://s1nh.org/post/python-different-ways-to-kill-a-thread/">

    <span hidden itemprop="author" itemscope itemtype="http://schema.org/Person">
      <meta itemprop="image" content="/images/avatar.jpg">
      <meta itemprop="name" content="S1NH">
    </span>

    <span hidden itemprop="publisher" itemscope itemtype="http://schema.org/Organization">
      <meta itemprop="name" content="S1NH">
      <meta itemprop="description" content="no other developers required.">
    </span>

    <span hidden itemprop="post" itemscope itemtype="http://schema.org/CreativeWork">
      <meta itemprop="name" content="undefined | S1NH">
      <meta itemprop="description" content="">
    </span>
      <header class="post-header">
        <h2 class="post-title" itemprop="name headline">
          <a href="/post/python-different-ways-to-kill-a-thread/" class="post-title-link" itemprop="url">Python 中杀死线程的几个方法</a>
        </h2>

        <div class="post-meta-container">
          <div class="post-meta">
    <span class="post-meta-item">
      <span class="post-meta-item-icon">
        <i class="far fa-calendar"></i>
      </span>
      <span class="post-meta-item-text">发表于</span>

      <time title="创建时间：2023-02-21 20:12:44" itemprop="dateCreated datePublished" datetime="2023-02-21T20:12:44+08:00">2023-02-21</time>
    </span>
    <span class="post-meta-item">
      <span class="post-meta-item-icon">
        <i class="far fa-folder"></i>
      </span>
      <span class="post-meta-item-text">分类于</span>
        <span itemprop="about" itemscope itemtype="http://schema.org/Thing">
          <a href="/categories/programming/" itemprop="url" rel="index"><span itemprop="name">算法与硬件</span></a>
        </span>
    </span>

  
</div>

        </div>
      </header>

    
    
    
    <div class="post-body" itemprop="articleBody">
          <p><code>翻译自 https://www.geeksforgeeks.org/python-different-ways-to-kill-a-thread/</code></p>
<p>通常，突然终止线程被认为是一种糟糕的编程习惯。突然终止线程可能会使必须正确关闭的关键资源处于打开状态。但是您可能希望在某个特定时间段过去或产生某个中断后终止线程。</p>
<p>下面有6种方式杀死线程，其中前两种较常用，我在原文的基础上进行了一些修改，以覆盖更多的情况。</p>
<ul>
<li>在 python 线程中抛出异常</li>
<li>使用 flag / Event()</li>
<li>使用 traces 杀死线程</li>
<li>使用 multiprocessing module 杀死线程</li>
<li>通过将其设置为守护进程来杀死 Python 线程</li>
<li>使用隐藏函数 _stop()</li>
</ul>
<h2 id="0x01-在-python-线程中抛出异常"><a href="#0x01-在-python-线程中抛出异常" class="headerlink" title="0x01 在 python 线程中抛出异常"></a>0x01 在 python 线程中抛出异常</h2><p>此方法使用函数 <a target="_blank" rel="noopener" href="https://docs.python.org/3/c-api/init.html?highlight=pythreadstate_setasyncexc#c.PyThreadState_SetAsyncExc">PyThreadState_SetAsyncExc()</a> 在线程中引发异常。</p>
<p>这种方法主要分两步。第一步获取线程id，第二步调用 SetAsyncExc，另外可以通过返回值查看是否杀死成功。 例如：</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br></pre></td><td class="code"><pre><span class="line"># Python program raising</span><br><span class="line"># exceptions in a python</span><br><span class="line"># thread</span><br><span class="line"></span><br><span class="line">import threading</span><br><span class="line">import ctypes</span><br><span class="line">import time</span><br><span class="line"></span><br><span class="line">class thread_with_exception(threading.Thread):</span><br><span class="line">	def __init__(self, name):</span><br><span class="line">		threading.Thread.__init__(self)</span><br><span class="line">		self.name = name</span><br><span class="line">			</span><br><span class="line">	def run(self):</span><br><span class="line"></span><br><span class="line">		# target function of the thread class</span><br><span class="line">		try:</span><br><span class="line">			while True:</span><br><span class="line">				print(&#x27;running &#x27; + self.name)</span><br><span class="line">		finally:</span><br><span class="line">			print(&#x27;ended&#x27;)</span><br><span class="line">		</span><br><span class="line">	def get_id(self):</span><br><span class="line"></span><br><span class="line">		# returns id of the respective thread</span><br><span class="line">		if hasattr(self, &#x27;_thread_id&#x27;):</span><br><span class="line">			return self._thread_id</span><br><span class="line">		for id, thread in threading._active.items():</span><br><span class="line">			if thread is self:</span><br><span class="line">				return id</span><br><span class="line"></span><br><span class="line">	def raise_exception(self):</span><br><span class="line">		thread_id = self.get_id()</span><br><span class="line">		res = ctypes.pythonapi.PyThreadState_SetAsyncExc(thread_id,</span><br><span class="line">			ctypes.py_object(SystemExit))</span><br><span class="line">		if res &gt; 1:</span><br><span class="line">			ctypes.pythonapi.PyThreadState_SetAsyncExc(thread_id, 0)</span><br><span class="line">			print(&#x27;Exception raise failure&#x27;)</span><br><span class="line">	</span><br><span class="line">t1 = thread_with_exception(&#x27;Thread 1&#x27;)</span><br><span class="line">t1.start()</span><br><span class="line">time.sleep(2)</span><br><span class="line">t1.raise_exception()</span><br><span class="line">t1.join()</span><br></pre></td></tr></table></figure>

<p>另外，<a target="_blank" rel="noopener" href="https://www.cnblogs.com/lucky-heng/p/11986091.html">这里</a>还有另一种方法获取线程的 id：</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br></pre></td><td class="code"><pre><span class="line">import threading</span><br><span class="line">import time</span><br><span class="line">import inspect</span><br><span class="line">import ctypes</span><br><span class="line"></span><br><span class="line"></span><br><span class="line">def _async_raise(tid, exctype):</span><br><span class="line">    &quot;&quot;&quot;Raises an exception in the threads with id tid&quot;&quot;&quot;</span><br><span class="line">    if not inspect.isclass(exctype):</span><br><span class="line">        raise TypeError(&quot;Only types can be raised (not instances)&quot;)</span><br><span class="line">    res = ctypes.pythonapi.PyThreadState_SetAsyncExc(ctypes.c_long(tid), ctypes.py_object(exctype))</span><br><span class="line">    if res == 0:</span><br><span class="line">        raise ValueError(&quot;invalid thread id&quot;)</span><br><span class="line">    elif res != 1:</span><br><span class="line">        # &quot;&quot;&quot;if it returns a number greater than one, you&#x27;re in trouble,</span><br><span class="line">        # and you should call it again with exc=NULL to revert the effect&quot;&quot;&quot;</span><br><span class="line">        ctypes.pythonapi.PyThreadState_SetAsyncExc(tid, None)</span><br><span class="line">        raise SystemError(&quot;PyThreadState_SetAsyncExc failed&quot;)</span><br><span class="line"></span><br><span class="line"></span><br><span class="line">def stop_thread(thread):</span><br><span class="line">    _async_raise(thread.ident, SystemExit)</span><br><span class="line"></span><br><span class="line"></span><br><span class="line">class TestThread(threading.Thread):</span><br><span class="line">    def run(self):</span><br><span class="line">        print(&quot;begin run the child thread&quot;)</span><br><span class="line">        while True:</span><br><span class="line">            print(&quot;sleep 1s&quot;)</span><br><span class="line">            time.sleep(1)</span><br><span class="line"></span><br><span class="line"></span><br><span class="line">if __name__ == &quot;__main__&quot;:</span><br><span class="line">    print(&quot;begin run main thread&quot;)</span><br><span class="line">    t = TestThread()</span><br><span class="line">    t.start()</span><br><span class="line">    time.sleep(3)</span><br><span class="line">    stop_thread(t)</span><br><span class="line">    print(&quot;main thread end&quot;)</span><br></pre></td></tr></table></figure>

<p>当我们在一台机器上运行上面的代码时，你会注意到，只要函数 raise_exception() 被调用，目标函数 run() 就会结束。这是因为一旦引发异常，程序控制就会跳出 try 块，run() 函数将终止。之后可以调用 join() 函数来终止线程。在没有函数 run_exception() 的情况下，目标函数 run() 将一直运行，并且永远不会调用 join() 函数来终止线程。
    </p>
<h2 id="0x02-使用-flag"><a href="#0x02-使用-flag" class="headerlink" title="0x02 使用 flag"></a>0x02 使用 flag</h2><p>为了杀死一个线程，我们可以声明一个停止标志，这个标志会被线程检查。例如</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br></pre></td><td class="code"><pre><span class="line"># Python program showing</span><br><span class="line"># how to kill threads</span><br><span class="line"># using set/reset stop</span><br><span class="line"># flag</span><br><span class="line"></span><br><span class="line">import threading</span><br><span class="line">import time</span><br><span class="line"></span><br><span class="line">def run():</span><br><span class="line">	while True:</span><br><span class="line">		print(&#x27;thread running&#x27;)</span><br><span class="line">		global stop_threads</span><br><span class="line">		if stop_threads:</span><br><span class="line">			break</span><br><span class="line"></span><br><span class="line">stop_threads = False</span><br><span class="line">t1 = threading.Thread(target = run)</span><br><span class="line">t1.start()</span><br><span class="line">time.sleep(1)</span><br><span class="line">stop_threads = True</span><br><span class="line">t1.join()</span><br><span class="line">print(&#x27;thread killed&#x27;)</span><br></pre></td></tr></table></figure>

<p>在上面的代码中，一旦设置了全局变量 stop_threads，目标函数 run() 就会结束，并且可以使用 t1.join() 杀死线程 t1。但是由于某些原因，人们可能会避免使用全局变量。对于这些情况，可以传递函数对象以提供类似的功能，如下所示。</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br></pre></td><td class="code"><pre><span class="line"># Python program killing</span><br><span class="line"># threads using stop</span><br><span class="line"># flag</span><br><span class="line"></span><br><span class="line">import threading</span><br><span class="line">import time</span><br><span class="line"></span><br><span class="line">def run(stop):</span><br><span class="line">	while True:</span><br><span class="line">		print(&#x27;thread running&#x27;)</span><br><span class="line">		if stop():</span><br><span class="line">				break</span><br><span class="line">				</span><br><span class="line">def main():</span><br><span class="line">		stop_threads = False</span><br><span class="line">		t1 = threading.Thread(target = run, args =(lambda : stop_threads, ))</span><br><span class="line">		t1.start()</span><br><span class="line">		time.sleep(1)</span><br><span class="line">		stop_threads = True</span><br><span class="line">		t1.join()</span><br><span class="line">		print(&#x27;thread killed&#x27;)</span><br><span class="line">main()</span><br></pre></td></tr></table></figure>

<p>上面代码中传入的函数对象总是返回局部变量 stop_threads 的值。这个值在函数 run() 中被检查，一旦 stop_threads 被重置，run() 函数结束并且线程可以被杀死。</p>
<p>另外，使用 <code>threading.Event()</code> 可以更优雅的实现这一功能。</p>
<h2 id="0x03-使用-traces-杀死线程"><a href="#0x03-使用-traces-杀死线程" class="headerlink" title="0x03 使用 traces 杀死线程"></a>0x03 使用 traces 杀死线程</h2><p>此方法通过在每个线程中使用 <strong>traces</strong> 来工作。每个 trace 都会在检测到某些刺激或标志时自行终止，从而立即终止关联的线程。例如</p>
<figure class="highlight plaintext"><figcaption><span>Python program using</span></figcaption><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br></pre></td><td class="code"><pre><span class="line"># traces to kill threads</span><br><span class="line"></span><br><span class="line">import sys</span><br><span class="line">import trace</span><br><span class="line">import threading</span><br><span class="line">import time</span><br><span class="line">class thread_with_trace(threading.Thread):</span><br><span class="line">def __init__(self, *args, **keywords):</span><br><span class="line">	threading.Thread.__init__(self, *args, **keywords)</span><br><span class="line">	self.killed = False</span><br><span class="line"></span><br><span class="line">def start(self):</span><br><span class="line">	self.__run_backup = self.run</span><br><span class="line">	self.run = self.__run	</span><br><span class="line">	threading.Thread.start(self)</span><br><span class="line"></span><br><span class="line">def __run(self):</span><br><span class="line">	sys.settrace(self.globaltrace)</span><br><span class="line">	self.__run_backup()</span><br><span class="line">	self.run = self.__run_backup</span><br><span class="line"></span><br><span class="line">def globaltrace(self, frame, event, arg):</span><br><span class="line">	if event == &#x27;call&#x27;:</span><br><span class="line">	return self.localtrace</span><br><span class="line">	else:</span><br><span class="line">	return None</span><br><span class="line"></span><br><span class="line">def localtrace(self, frame, event, arg):</span><br><span class="line">	if self.killed:</span><br><span class="line">	if event == &#x27;line&#x27;:</span><br><span class="line">		raise SystemExit()</span><br><span class="line">	return self.localtrace</span><br><span class="line"></span><br><span class="line">def kill(self):</span><br><span class="line">	self.killed = True</span><br><span class="line"></span><br><span class="line">def func():</span><br><span class="line">while True:</span><br><span class="line">	print(&#x27;thread running&#x27;)</span><br><span class="line"></span><br><span class="line">t1 = thread_with_trace(target = func)</span><br><span class="line">t1.start()</span><br><span class="line">time.sleep(2)</span><br><span class="line">t1.kill()</span><br><span class="line">t1.join()</span><br><span class="line">if not t1.isAlive():</span><br><span class="line">print(&#x27;thread killed&#x27;)</span><br></pre></td></tr></table></figure>

<p>在这段代码中，start() 被稍微修改为使用 <a target="_blank" rel="noopener" href="https://docs.python.org/2/library/sys.html?highlight=settrace#sys.settrace">settrace()</a> 设置系统跟踪功能。本地跟踪函数的定义是，无论何时设置相应线程的终止标志（已终止），都会引发 <a target="_blank" rel="noopener" href="https://www.geeksforgeeks.org/built-exceptions-python/">SystemExit</a> 异常执行下一行代码，结束目标函数func的执行。现在可以使用 join() 终止线程。</p>
<h2 id="0x04-使用-multiprocessing-module-杀死线程"><a href="#0x04-使用-multiprocessing-module-杀死线程" class="headerlink" title="0x04 使用 multiprocessing module 杀死线程"></a>0x04 使用 multiprocessing module 杀死线程</h2><p>Python 的<a target="_blank" rel="noopener" href="https://www.geeksforgeeks.org/multiprocessing-python-set-1/">multiprocessing module</a> 允许您以类似于使用线程模块生成线程的方式生成进程。multiprocessing module 的接口与 threading 的接口类似。例如，在给定的代码中，我们创建了三个线程（进程），它们从 1 计数到 9。</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br></pre></td><td class="code"><pre><span class="line"># Python program creating</span><br><span class="line"># three threads</span><br><span class="line"></span><br><span class="line">import threading</span><br><span class="line">import time</span><br><span class="line"></span><br><span class="line"># counts from 1 to 9</span><br><span class="line">def func(number):</span><br><span class="line">	for i in range(1, 10):</span><br><span class="line">		time.sleep(0.01)</span><br><span class="line">		print(&#x27;Thread &#x27; + str(number) + &#x27;: prints &#x27; + str(number*i))</span><br><span class="line"></span><br><span class="line"># creates 3 threads</span><br><span class="line">for i in range(0, 3):</span><br><span class="line">	thread = threading.Thread(target=func, args=(i,))</span><br><span class="line">	thread.start()</span><br></pre></td></tr></table></figure>

<p>上述代码的功能也可以通过类似的方式使用多处理模块来实现，只需很少的改动。请参阅下面给出的代码。
 </p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br></pre></td><td class="code"><pre><span class="line"># Python program creating</span><br><span class="line"># thread using multiprocessing</span><br><span class="line"># module</span><br><span class="line"></span><br><span class="line">import multiprocessing</span><br><span class="line">import time</span><br><span class="line"></span><br><span class="line">def func(number):</span><br><span class="line">	for i in range(1, 10):</span><br><span class="line">		time.sleep(0.01)</span><br><span class="line">		print(&#x27;Processing &#x27; + str(number) + &#x27;: prints &#x27; + str(number*i))</span><br><span class="line"></span><br><span class="line">for i in range(0, 3):</span><br><span class="line">	process = multiprocessing.Process(target=func, args=(i,))</span><br><span class="line">	process.start()</span><br></pre></td></tr></table></figure>

<p>尽管这两个模块的接口相似，但是这两个模块的实现却截然不同。所有线程共享全局变量，而进程彼此完全分离。因此，与杀死线程相比，杀死进程要安全得多。 Process 类提供了一种方法 <a target="_blank" rel="noopener" href="https://docs.python.org/3.4/library/multiprocessing.html?highlight=process#multiprocessing.Process.terminate">terminate()</a> 来终止进程。现在，回到最初的问题。假设在上面的代码中，我们想要在 0.03s 过去后杀死所有进程。此功能是使用以下代码中的 multiprocessing 实现的。</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br></pre></td><td class="code"><pre><span class="line"># Python program killing</span><br><span class="line"># a thread using multiprocessing</span><br><span class="line"># module</span><br><span class="line"></span><br><span class="line">import multiprocessing</span><br><span class="line">import time</span><br><span class="line"></span><br><span class="line">def func(number):</span><br><span class="line">	for i in range(1, 10):</span><br><span class="line">		time.sleep(0.01)</span><br><span class="line">		print(&#x27;Processing &#x27; + str(number) + &#x27;: prints &#x27; + str(number*i))</span><br><span class="line"></span><br><span class="line"># list of all processes, so that they can be killed afterwards</span><br><span class="line">all_processes = []</span><br><span class="line"></span><br><span class="line">for i in range(0, 3):</span><br><span class="line">	process = multiprocessing.Process(target=func, args=(i,))</span><br><span class="line">	process.start()</span><br><span class="line">	all_processes.append(process)</span><br><span class="line"></span><br><span class="line"># kill all processes after 0.03s</span><br><span class="line">time.sleep(0.03)</span><br><span class="line">for process in all_processes:</span><br><span class="line">	process.terminate()</span><br></pre></td></tr></table></figure>

<p>虽然这两个模块有不同的实现。上面代码中多处理模块提供的这个功能类似于杀死线程。因此，只要我们需要在 Python 中实现线程终止，<code>multiprocessing</code> 就可以作为一个简单的替代方案。</p>
<h2 id="0x05-通过将其设置为守护进程（daemon）来杀死-Python-线程"><a href="#0x05-通过将其设置为守护进程（daemon）来杀死-Python-线程" class="headerlink" title="0x05 通过将其设置为守护进程（daemon）来杀死 Python 线程"></a>0x05 通过将其设置为守护进程（daemon）来杀死 Python 线程</h2><p><a target="_blank" rel="noopener" href="https://docs.python.org/3/library/threading.html#threading.Thread.daemon">守护线程</a> 是那些在主程序退出时被杀死的线程。例如</p>
<p> </p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br></pre></td><td class="code"><pre><span class="line">import threading</span><br><span class="line">import time</span><br><span class="line">import sys</span><br><span class="line"></span><br><span class="line">def func():</span><br><span class="line">	while True:</span><br><span class="line">		time.sleep(0.5)</span><br><span class="line">		print(&quot;Thread alive, and it won&#x27;t die on program termination&quot;)</span><br><span class="line"></span><br><span class="line">t1 = threading.Thread(target=func)</span><br><span class="line">t1.start()</span><br><span class="line">time.sleep(2)</span><br><span class="line">sys.exit()</span><br></pre></td></tr></table></figure>

<p>请注意，线程 t1 保持活动状态并阻止主程序通过 sys.exit() 退出。在 Python 中，任何活动的非守护线程都会阻止主程序退出。然而，一旦主程序退出，守护线程本身就会被杀死。换句话说，主程序一退出，所有的守护线程就被杀死了。要将线程声明为守护进程，我们将关键字参数 daemon 设置为 True。例如，在给定的代码中，它演示了守护线程的属性。</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br></pre></td><td class="code"><pre><span class="line"># Python program killing</span><br><span class="line"># thread using daemon</span><br><span class="line"></span><br><span class="line">import threading</span><br><span class="line">import time</span><br><span class="line">import sys</span><br><span class="line"></span><br><span class="line">def func():</span><br><span class="line">	while True:</span><br><span class="line">		time.sleep(0.5)</span><br><span class="line">		print(&#x27;Thread alive, but it will die on program termination&#x27;)</span><br><span class="line"></span><br><span class="line">t1 = threading.Thread(target=func)</span><br><span class="line">t1.daemon = True</span><br><span class="line">t1.start()</span><br><span class="line">time.sleep(2)</span><br><span class="line">sys.exit()</span><br></pre></td></tr></table></figure>

<p>请注意，一旦主程序退出，线程 t1 就会被终止。在程序终止可用于触发线程终止的情况下，此方法被证明非常有用。请注意，在 Python 中，只要所有非守护线程都死了，主程序就会终止，而不管有多少守护线程处于活动状态。因此，这些守护线程所持有的资源，例如打开的文件、数据库事务等，可能无法正常释放。 python 程序中的初始控制线程不是守护线程。除非确定知道这样做不会导致任何泄漏或死锁，否则不建议强行终止线程。</p>
<h2 id="0x06-使用隐藏函数-stop"><a href="#0x06-使用隐藏函数-stop" class="headerlink" title="0x06 使用隐藏函数 _stop()"></a>0x06 使用隐藏函数 <code>_stop()</code></h2><p>为了杀死一个线程，我们使用隐藏函数 <code>_stop()</code> 这个函数没有记录但可能会在下一版本的 python 中消失。</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br></pre></td><td class="code"><pre><span class="line"># Python program killing</span><br><span class="line"># a thread using ._stop()</span><br><span class="line"># function</span><br><span class="line"></span><br><span class="line">import time</span><br><span class="line">import threading</span><br><span class="line"></span><br><span class="line">class MyThread(threading.Thread):</span><br><span class="line"></span><br><span class="line">	# Thread class with a _stop() method.</span><br><span class="line">	# The thread itself has to check</span><br><span class="line">	# regularly for the stopped() condition.</span><br><span class="line"></span><br><span class="line">	def __init__(self, *args, **kwargs):</span><br><span class="line">		super(MyThread, self).__init__(*args, **kwargs)</span><br><span class="line">		self._stop = threading.Event()</span><br><span class="line"></span><br><span class="line">	# function using _stop function</span><br><span class="line">	def stop(self):</span><br><span class="line">		self._stop.set()</span><br><span class="line"></span><br><span class="line">	def stopped(self):</span><br><span class="line">		return self._stop.isSet()</span><br><span class="line"></span><br><span class="line">	def run(self):</span><br><span class="line">		while True:</span><br><span class="line">			if self.stopped():</span><br><span class="line">				return</span><br><span class="line">			print(&quot;Hello, world!&quot;)</span><br><span class="line">			time.sleep(1)</span><br><span class="line"></span><br><span class="line">t1 = MyThread()</span><br><span class="line"></span><br><span class="line">t1.start()</span><br><span class="line">time.sleep(5)</span><br><span class="line">t1.stop()</span><br><span class="line">t1.join()</span><br></pre></td></tr></table></figure>

<p><strong>注意：</strong> 以上方法在某些情况下可能不起作用，因为 python 没有提供任何直接杀死线程的方法。</p>

      
    </div>

    
    
    

    <footer class="post-footer">
        <div class="post-eof"></div>
      
    </footer>
  </article>
</div>




    


<div class="post-block">
  
  

  <article itemscope itemtype="http://schema.org/Article" class="post-content" lang="">
    <link itemprop="mainEntityOfPage" href="http://s1nh.org/post/big-muff-pi-analysis/">

    <span hidden itemprop="author" itemscope itemtype="http://schema.org/Person">
      <meta itemprop="image" content="/images/avatar.jpg">
      <meta itemprop="name" content="S1NH">
    </span>

    <span hidden itemprop="publisher" itemscope itemtype="http://schema.org/Organization">
      <meta itemprop="name" content="S1NH">
      <meta itemprop="description" content="no other developers required.">
    </span>

    <span hidden itemprop="post" itemscope itemtype="http://schema.org/CreativeWork">
      <meta itemprop="name" content="undefined | S1NH">
      <meta itemprop="description" content="">
    </span>
      <header class="post-header">
        <h2 class="post-title" itemprop="name headline">
          <a href="/post/big-muff-pi-analysis/" class="post-title-link" itemprop="url">Big Muff Pi 电路分析</a>
        </h2>

        <div class="post-meta-container">
          <div class="post-meta">
    <span class="post-meta-item">
      <span class="post-meta-item-icon">
        <i class="far fa-calendar"></i>
      </span>
      <span class="post-meta-item-text">发表于</span>

      <time title="创建时间：2023-02-16 20:39:08" itemprop="dateCreated datePublished" datetime="2023-02-16T20:39:08+08:00">2023-02-16</time>
    </span>
    <span class="post-meta-item">
      <span class="post-meta-item-icon">
        <i class="far fa-folder"></i>
      </span>
      <span class="post-meta-item-text">分类于</span>
        <span itemprop="about" itemscope itemtype="http://schema.org/Thing">
          <a href="/categories/music/" itemprop="url" rel="index"><span itemprop="name">音乐相关</span></a>
        </span>
    </span>

  
</div>

        </div>
      </header>

    
    
    
    <div class="post-body" itemprop="articleBody">
          <p>The Big Muff Pi is a distortion/sustain guitar pedal designed by Bob Myer and Mike Matthews in 1969 and mass produced in 1970. This effect was the first overwhelming success of Electro-Harmonix due to the distinctive sound, price, and reliability. Several versions and reeditions were released over the years.</p>
<p><img data-src="http://qiniu.s1nh.org/bmp-all-pedals.png" alt="Big Muff Pi All Pedals"></p>
          <!--noindex-->
            <div class="post-button">
              <a class="btn" href="/post/big-muff-pi-analysis/#more" rel="contents">
                阅读全文 &raquo;
              </a>
            </div>
          <!--/noindex-->
        
      
    </div>

    
    
    

    <footer class="post-footer">
        <div class="post-eof"></div>
      
    </footer>
  </article>
</div>




    


<div class="post-block">
  
  

  <article itemscope itemtype="http://schema.org/Article" class="post-content" lang="">
    <link itemprop="mainEntityOfPage" href="http://s1nh.org/post/klon-centaur-analysis/">

    <span hidden itemprop="author" itemscope itemtype="http://schema.org/Person">
      <meta itemprop="image" content="/images/avatar.jpg">
      <meta itemprop="name" content="S1NH">
    </span>

    <span hidden itemprop="publisher" itemscope itemtype="http://schema.org/Organization">
      <meta itemprop="name" content="S1NH">
      <meta itemprop="description" content="no other developers required.">
    </span>

    <span hidden itemprop="post" itemscope itemtype="http://schema.org/CreativeWork">
      <meta itemprop="name" content="undefined | S1NH">
      <meta itemprop="description" content="">
    </span>
      <header class="post-header">
        <h2 class="post-title" itemprop="name headline">
          <a href="/post/klon-centaur-analysis/" class="post-title-link" itemprop="url">Klon Centaur 电路分析</a>
        </h2>

        <div class="post-meta-container">
          <div class="post-meta">
    <span class="post-meta-item">
      <span class="post-meta-item-icon">
        <i class="far fa-calendar"></i>
      </span>
      <span class="post-meta-item-text">发表于</span>

      <time title="创建时间：2023-02-16 20:38:54" itemprop="dateCreated datePublished" datetime="2023-02-16T20:38:54+08:00">2023-02-16</time>
    </span>
    <span class="post-meta-item">
      <span class="post-meta-item-icon">
        <i class="far fa-folder"></i>
      </span>
      <span class="post-meta-item-text">分类于</span>
        <span itemprop="about" itemscope itemtype="http://schema.org/Thing">
          <a href="/categories/music/" itemprop="url" rel="index"><span itemprop="name">音乐相关</span></a>
        </span>
    </span>

  
</div>

        </div>
      </header>

    
    
    
    <div class="post-body" itemprop="articleBody">
          <p><code>全文译自: https://www.electrosmash.com/klon-centaur-analysis</code></p>
<p>1990 年至 1994 年间，Bill Finnegan 在两位麻省理工学院电子工程师的帮助下，设计了过载效果器 Klon Centaur。最初的想法是改善 TubeScreamer 的瞬态响应和中低音频率，以产生带有电子管效果器的过载音色。</p>
<p><img data-src="http://qiniu.s1nh.org/Klon-Centaur-intro-small.jpg" alt="Klon Centaur intro small"></p>
          <!--noindex-->
            <div class="post-button">
              <a class="btn" href="/post/klon-centaur-analysis/#more" rel="contents">
                阅读全文 &raquo;
              </a>
            </div>
          <!--/noindex-->
        
      
    </div>

    
    
    

    <footer class="post-footer">
        <div class="post-eof"></div>
      
    </footer>
  </article>
</div>




    


<div class="post-block">
  
  

  <article itemscope itemtype="http://schema.org/Article" class="post-content" lang="">
    <link itemprop="mainEntityOfPage" href="http://s1nh.org/post/fuzz-face-analysis/">

    <span hidden itemprop="author" itemscope itemtype="http://schema.org/Person">
      <meta itemprop="image" content="/images/avatar.jpg">
      <meta itemprop="name" content="S1NH">
    </span>

    <span hidden itemprop="publisher" itemscope itemtype="http://schema.org/Organization">
      <meta itemprop="name" content="S1NH">
      <meta itemprop="description" content="no other developers required.">
    </span>

    <span hidden itemprop="post" itemscope itemtype="http://schema.org/CreativeWork">
      <meta itemprop="name" content="undefined | S1NH">
      <meta itemprop="description" content="">
    </span>
      <header class="post-header">
        <h2 class="post-title" itemprop="name headline">
          <a href="/post/fuzz-face-analysis/" class="post-title-link" itemprop="url">Fuzz Face 电路分析</a>
        </h2>

        <div class="post-meta-container">
          <div class="post-meta">
    <span class="post-meta-item">
      <span class="post-meta-item-icon">
        <i class="far fa-calendar"></i>
      </span>
      <span class="post-meta-item-text">发表于</span>

      <time title="创建时间：2023-02-16 20:37:07" itemprop="dateCreated datePublished" datetime="2023-02-16T20:37:07+08:00">2023-02-16</time>
    </span>
    <span class="post-meta-item">
      <span class="post-meta-item-icon">
        <i class="far fa-folder"></i>
      </span>
      <span class="post-meta-item-text">分类于</span>
        <span itemprop="about" itemscope itemtype="http://schema.org/Thing">
          <a href="/categories/music/" itemprop="url" rel="index"><span itemprop="name">音乐相关</span></a>
        </span>
    </span>

  
</div>

        </div>
      </header>

    
    
    
    <div class="post-body" itemprop="articleBody">
          <p>The Fuzz Face is a distortion guitar pedal designed in London by Arbitrer Electronics Ltd in the autumn of 1966. It produces a characteristic high distorted sound called <em>fuzz</em>.<br>Ivor Arbiter took the round shaped enclosure idea from a microphone stand and it was the first pedal including a DPDT stomp-switch. The effect became very popular because Jimi Hendrix played it and there were not many distortion pedals around at that time.</p>
<p><img data-src="http://qiniu.s1nh.org/fuzz-face-pedal-small.jpg" alt="fuzz face pedal" title="fuzz face pedal"></p>
          <!--noindex-->
            <div class="post-button">
              <a class="btn" href="/post/fuzz-face-analysis/#more" rel="contents">
                阅读全文 &raquo;
              </a>
            </div>
          <!--/noindex-->
        
      
    </div>

    
    
    

    <footer class="post-footer">
        <div class="post-eof"></div>
      
    </footer>
  </article>
</div>




    


<div class="post-block">
  
  

  <article itemscope itemtype="http://schema.org/Article" class="post-content" lang="">
    <link itemprop="mainEntityOfPage" href="http://s1nh.org/post/proco-rat-analysis/">

    <span hidden itemprop="author" itemscope itemtype="http://schema.org/Person">
      <meta itemprop="image" content="/images/avatar.jpg">
      <meta itemprop="name" content="S1NH">
    </span>

    <span hidden itemprop="publisher" itemscope itemtype="http://schema.org/Organization">
      <meta itemprop="name" content="S1NH">
      <meta itemprop="description" content="no other developers required.">
    </span>

    <span hidden itemprop="post" itemscope itemtype="http://schema.org/CreativeWork">
      <meta itemprop="name" content="undefined | S1NH">
      <meta itemprop="description" content="">
    </span>
      <header class="post-header">
        <h2 class="post-title" itemprop="name headline">
          <a href="/post/proco-rat-analysis/" class="post-title-link" itemprop="url">Pro Co RAT 失真效果器电路分析</a>
        </h2>

        <div class="post-meta-container">
          <div class="post-meta">
    <span class="post-meta-item">
      <span class="post-meta-item-icon">
        <i class="far fa-calendar"></i>
      </span>
      <span class="post-meta-item-text">发表于</span>

      <time title="创建时间：2023-02-14 23:36:58" itemprop="dateCreated datePublished" datetime="2023-02-14T23:36:58+08:00">2023-02-14</time>
    </span>
    <span class="post-meta-item">
      <span class="post-meta-item-icon">
        <i class="far fa-folder"></i>
      </span>
      <span class="post-meta-item-text">分类于</span>
        <span itemprop="about" itemscope itemtype="http://schema.org/Thing">
          <a href="/categories/music/" itemprop="url" rel="index"><span itemprop="name">音乐相关</span></a>
        </span>
    </span>

  
</div>

        </div>
      </header>

    
    
    
    <div class="post-body" itemprop="articleBody">
          <p>Pro Co Rat 是 Pro Co Sound 公司生产的失真踏板，由 Scott Burnham 和 Steve Kiraly 于 1978 年在密歇根州的卡拉马祖设计。电路和外观在不同版本中发生了一些变化，但音色保持不变。</p>
<p>由于踏板的成功，Pro Co 设计了多个版本，比如 <code>Juggernaut (1979)</code>, <code>R2DU (1984)</code>, <code>RAT2 (1988)</code>, <code>Turbo RAT (1989)</code>, <code>Vintage RAT (1991)</code>, <code>BRAT (1997)</code>, <code>Deucetone RAT (2002)</code>, <code>Juggernaut Bass RAT (2003)</code>, <code>You Dirty RAT (2004)</code>, <code>&#39;85 Whiteface RAT Reissue (2010)</code>。</p>
<p><img data-src="http://qiniu.s1nh.org/prc85rat_intro.jpg" alt="ProCo Rat Pedal Intro Image"></p>
          <!--noindex-->
            <div class="post-button">
              <a class="btn" href="/post/proco-rat-analysis/#more" rel="contents">
                阅读全文 &raquo;
              </a>
            </div>
          <!--/noindex-->
        
      
    </div>

    
    
    

    <footer class="post-footer">
        <div class="post-eof"></div>
      
    </footer>
  </article>
</div>




    


<div class="post-block">
  
  

  <article itemscope itemtype="http://schema.org/Article" class="post-content" lang="">
    <link itemprop="mainEntityOfPage" href="http://s1nh.org/post/scores/">

    <span hidden itemprop="author" itemscope itemtype="http://schema.org/Person">
      <meta itemprop="image" content="/images/avatar.jpg">
      <meta itemprop="name" content="S1NH">
    </span>

    <span hidden itemprop="publisher" itemscope itemtype="http://schema.org/Organization">
      <meta itemprop="name" content="S1NH">
      <meta itemprop="description" content="no other developers required.">
    </span>

    <span hidden itemprop="post" itemscope itemtype="http://schema.org/CreativeWork">
      <meta itemprop="name" content="undefined | S1NH">
      <meta itemprop="description" content="">
    </span>
      <header class="post-header">
        <h2 class="post-title" itemprop="name headline">
          <a href="/post/scores/" class="post-title-link" itemprop="url">孤独摇滚 + Yorushika 吉他谱</a>
        </h2>

        <div class="post-meta-container">
          <div class="post-meta">
    <span class="post-meta-item">
      <span class="post-meta-item-icon">
        <i class="far fa-calendar"></i>
      </span>
      <span class="post-meta-item-text">发表于</span>

      <time title="创建时间：2023-02-05 16:47:43" itemprop="dateCreated datePublished" datetime="2023-02-05T16:47:43+08:00">2023-02-05</time>
    </span>
    <span class="post-meta-item">
      <span class="post-meta-item-icon">
        <i class="far fa-folder"></i>
      </span>
      <span class="post-meta-item-text">分类于</span>
        <span itemprop="about" itemscope itemtype="http://schema.org/Thing">
          <a href="/categories/music/" itemprop="url" rel="index"><span itemprop="name">音乐相关</span></a>
        </span>
    </span>

  
</div>

        </div>
      </header>

    
    
    
    <div class="post-body" itemprop="articleBody">
          <p><code>持续更新中，欢迎在主页左边扫码给我买杯咖啡 ^_^</code></p>
          <!--noindex-->
            <div class="post-button">
              <a class="btn" href="/post/scores/#more" rel="contents">
                阅读全文 &raquo;
              </a>
            </div>
          <!--/noindex-->
        
      
    </div>

    
    
    

    <footer class="post-footer">
        <div class="post-eof"></div>
      
    </footer>
  </article>
</div>




    


<div class="post-block">
  
  

  <article itemscope itemtype="http://schema.org/Article" class="post-content" lang="">
    <link itemprop="mainEntityOfPage" href="http://s1nh.org/post/disappeared-comments/">

    <span hidden itemprop="author" itemscope itemtype="http://schema.org/Person">
      <meta itemprop="image" content="/images/avatar.jpg">
      <meta itemprop="name" content="S1NH">
    </span>

    <span hidden itemprop="publisher" itemscope itemtype="http://schema.org/Organization">
      <meta itemprop="name" content="S1NH">
      <meta itemprop="description" content="no other developers required.">
    </span>

    <span hidden itemprop="post" itemscope itemtype="http://schema.org/CreativeWork">
      <meta itemprop="name" content="undefined | S1NH">
      <meta itemprop="description" content="">
    </span>
      <header class="post-header">
        <h2 class="post-title" itemprop="name headline">
          <a href="/post/disappeared-comments/" class="post-title-link" itemprop="url">消失的评论</a>
        </h2>

        <div class="post-meta-container">
          <div class="post-meta">
    <span class="post-meta-item">
      <span class="post-meta-item-icon">
        <i class="far fa-calendar"></i>
      </span>
      <span class="post-meta-item-text">发表于</span>

      <time title="创建时间：2023-02-01 22:13:40" itemprop="dateCreated datePublished" datetime="2023-02-01T22:13:40+08:00">2023-02-01</time>
    </span>
    <span class="post-meta-item">
      <span class="post-meta-item-icon">
        <i class="far fa-folder"></i>
      </span>
      <span class="post-meta-item-text">分类于</span>
        <span itemprop="about" itemscope itemtype="http://schema.org/Thing">
          <a href="/categories/other/" itemprop="url" rel="index"><span itemprop="name">其它笔记</span></a>
        </span>
    </span>

  
</div>

        </div>
      </header>

    
    
    
    <div class="post-body" itemprop="articleBody">
          <p>之前使用的 valine 评论工具有一些漏洞会导致隐私泄漏和XSS攻击，比如[<a target="_blank" rel="noopener" href="https://blog.maplesugar.top/valine-prank/">这个</a>]，目前更换为 utteranc ，一个基于 github 的评论工具。之前的评论放弃迁移了，直接贴在本文。</p>
          <!--noindex-->
            <div class="post-button">
              <a class="btn" href="/post/disappeared-comments/#more" rel="contents">
                阅读全文 &raquo;
              </a>
            </div>
          <!--/noindex-->
        
      
    </div>

    
    
    

    <footer class="post-footer">
        <div class="post-eof"></div>
      
    </footer>
  </article>
</div>




    


<div class="post-block">
  
  

  <article itemscope itemtype="http://schema.org/Article" class="post-content" lang="">
    <link itemprop="mainEntityOfPage" href="http://s1nh.org/post/mechanism-of-action-of-antidepressants/">

    <span hidden itemprop="author" itemscope itemtype="http://schema.org/Person">
      <meta itemprop="image" content="/images/avatar.jpg">
      <meta itemprop="name" content="S1NH">
    </span>

    <span hidden itemprop="publisher" itemscope itemtype="http://schema.org/Organization">
      <meta itemprop="name" content="S1NH">
      <meta itemprop="description" content="no other developers required.">
    </span>

    <span hidden itemprop="post" itemscope itemtype="http://schema.org/CreativeWork">
      <meta itemprop="name" content="undefined | S1NH">
      <meta itemprop="description" content="">
    </span>
      <header class="post-header">
        <h2 class="post-title" itemprop="name headline">
          <a href="/post/mechanism-of-action-of-antidepressants/" class="post-title-link" itemprop="url">常见抗抑郁药的作用机制整理</a>
        </h2>

        <div class="post-meta-container">
          <div class="post-meta">
    <span class="post-meta-item">
      <span class="post-meta-item-icon">
        <i class="far fa-calendar"></i>
      </span>
      <span class="post-meta-item-text">发表于</span>

      <time title="创建时间：2023-01-17 12:08:01" itemprop="dateCreated datePublished" datetime="2023-01-17T12:08:01+08:00">2023-01-17</time>
    </span>
    <span class="post-meta-item">
      <span class="post-meta-item-icon">
        <i class="far fa-folder"></i>
      </span>
      <span class="post-meta-item-text">分类于</span>
        <span itemprop="about" itemscope itemtype="http://schema.org/Thing">
          <a href="/categories/other/" itemprop="url" rel="index"><span itemprop="name">其它笔记</span></a>
        </span>
    </span>

  
</div>

        </div>
      </header>

    
    
    
    <div class="post-body" itemprop="articleBody">
          <!--
外向的人如同太阳，内向的人就像月亮。
只要太阳存在，月亮就不被看见。晚上太阳休息了，月亮还亮着，因为它还在琢磨白天的事情，根本睡不着。
-->

<blockquote>
<p>那天他看外面阳光很好，于是穿上自己最喜欢的衣服，带上自己觉得最好看的遮阳帽，独自一人悄悄走向了远方，然后再也没回来。</p>
</blockquote>
<p>本文总结了常见抗抑郁药的对应靶点，以及相应耙点会产生的精神效果。阅读本文需要了解抗抑郁药的基本原理，可以在b站 <code>药学生Justin</code> <code>底层原理</code> 中快速了解有关知识。</p>
          <!--noindex-->
            <div class="post-button">
              <a class="btn" href="/post/mechanism-of-action-of-antidepressants/#more" rel="contents">
                阅读全文 &raquo;
              </a>
            </div>
          <!--/noindex-->
        
      
    </div>

    
    
    

    <footer class="post-footer">
        <div class="post-eof"></div>
      
    </footer>
  </article>
</div>




    


<div class="post-block">
  
  

  <article itemscope itemtype="http://schema.org/Article" class="post-content" lang="">
    <link itemprop="mainEntityOfPage" href="http://s1nh.org/post/note_1/">

    <span hidden itemprop="author" itemscope itemtype="http://schema.org/Person">
      <meta itemprop="image" content="/images/avatar.jpg">
      <meta itemprop="name" content="S1NH">
    </span>

    <span hidden itemprop="publisher" itemscope itemtype="http://schema.org/Organization">
      <meta itemprop="name" content="S1NH">
      <meta itemprop="description" content="no other developers required.">
    </span>

    <span hidden itemprop="post" itemscope itemtype="http://schema.org/CreativeWork">
      <meta itemprop="name" content="undefined | S1NH">
      <meta itemprop="description" content="">
    </span>
      <header class="post-header">
        <h2 class="post-title" itemprop="name headline">
          <a href="/post/note_1/" class="post-title-link" itemprop="url">其它笔记</a>
        </h2>

        <div class="post-meta-container">
          <div class="post-meta">
    <span class="post-meta-item">
      <span class="post-meta-item-icon">
        <i class="far fa-calendar"></i>
      </span>
      <span class="post-meta-item-text">发表于</span>

      <time title="创建时间：2022-12-19 21:03:44" itemprop="dateCreated datePublished" datetime="2022-12-19T21:03:44+08:00">2022-12-19</time>
    </span>
    <span class="post-meta-item">
      <span class="post-meta-item-icon">
        <i class="far fa-folder"></i>
      </span>
      <span class="post-meta-item-text">分类于</span>
        <span itemprop="about" itemscope itemtype="http://schema.org/Thing">
          <a href="/categories/other/" itemprop="url" rel="index"><span itemprop="name">其它笔记</span></a>
        </span>
    </span>

  
</div>

        </div>
      </header>

    
    
    
    <div class="post-body" itemprop="articleBody">
          <p>懂王附体，很神奇的强行全面放开了</p>
          <!--noindex-->
            <div class="post-button">
              <a class="btn" href="/post/note_1/#more" rel="contents">
                阅读全文 &raquo;
              </a>
            </div>
          <!--/noindex-->
        
      
    </div>

    
    
    

    <footer class="post-footer">
        <div class="post-eof"></div>
      
    </footer>
  </article>
</div>




    


<div class="post-block">
  
  

  <article itemscope itemtype="http://schema.org/Article" class="post-content" lang="">
    <link itemprop="mainEntityOfPage" href="http://s1nh.org/post/concepts-of-fast-dds/">

    <span hidden itemprop="author" itemscope itemtype="http://schema.org/Person">
      <meta itemprop="image" content="/images/avatar.jpg">
      <meta itemprop="name" content="S1NH">
    </span>

    <span hidden itemprop="publisher" itemscope itemtype="http://schema.org/Organization">
      <meta itemprop="name" content="S1NH">
      <meta itemprop="description" content="no other developers required.">
    </span>

    <span hidden itemprop="post" itemscope itemtype="http://schema.org/CreativeWork">
      <meta itemprop="name" content="undefined | S1NH">
      <meta itemprop="description" content="">
    </span>
      <header class="post-header">
        <h2 class="post-title" itemprop="name headline">
          <a href="/post/concepts-of-fast-dds/" class="post-title-link" itemprop="url">一些有关 FastDDS 的基本概念</a>
        </h2>

        <div class="post-meta-container">
          <div class="post-meta">
    <span class="post-meta-item">
      <span class="post-meta-item-icon">
        <i class="far fa-calendar"></i>
      </span>
      <span class="post-meta-item-text">发表于</span>

      <time title="创建时间：2022-09-30 11:16:50" itemprop="dateCreated datePublished" datetime="2022-09-30T11:16:50+08:00">2022-09-30</time>
    </span>
    <span class="post-meta-item">
      <span class="post-meta-item-icon">
        <i class="far fa-folder"></i>
      </span>
      <span class="post-meta-item-text">分类于</span>
        <span itemprop="about" itemscope itemtype="http://schema.org/Thing">
          <a href="/categories/programming/" itemprop="url" rel="index"><span itemprop="name">算法与硬件</span></a>
        </span>
    </span>

  
</div>

        </div>
      </header>

    
    
    
    <div class="post-body" itemprop="articleBody">
          <p>FastDDS 有两套 API，接近传输层的 <code>RTPS API</code> 和规范的 <code>DDS API</code>。</p>
<img style="background-color:white" data-src="http://qiniu.s1nh.org/fast-dds-architecture.svg"  width=65% />
          <!--noindex-->
            <div class="post-button">
              <a class="btn" href="/post/concepts-of-fast-dds/#more" rel="contents">
                阅读全文 &raquo;
              </a>
            </div>
          <!--/noindex-->
        
      
    </div>

    
    
    

    <footer class="post-footer">
        <div class="post-eof"></div>
      
    </footer>
  </article>
</div>




    


<div class="post-block">
  
  

  <article itemscope itemtype="http://schema.org/Article" class="post-content" lang="">
    <link itemprop="mainEntityOfPage" href="http://s1nh.org/post/use-git-stash/">

    <span hidden itemprop="author" itemscope itemtype="http://schema.org/Person">
      <meta itemprop="image" content="/images/avatar.jpg">
      <meta itemprop="name" content="S1NH">
    </span>

    <span hidden itemprop="publisher" itemscope itemtype="http://schema.org/Organization">
      <meta itemprop="name" content="S1NH">
      <meta itemprop="description" content="no other developers required.">
    </span>

    <span hidden itemprop="post" itemscope itemtype="http://schema.org/CreativeWork">
      <meta itemprop="name" content="undefined | S1NH">
      <meta itemprop="description" content="">
    </span>
      <header class="post-header">
        <h2 class="post-title" itemprop="name headline">
          <a href="/post/use-git-stash/" class="post-title-link" itemprop="url">使用 git squash 保持干净的主分支，及相应的调试方法</a>
        </h2>

        <div class="post-meta-container">
          <div class="post-meta">
    <span class="post-meta-item">
      <span class="post-meta-item-icon">
        <i class="far fa-calendar"></i>
      </span>
      <span class="post-meta-item-text">发表于</span>

      <time title="创建时间：2022-09-15 17:17:09" itemprop="dateCreated datePublished" datetime="2022-09-15T17:17:09+08:00">2022-09-15</time>
    </span>
    <span class="post-meta-item">
      <span class="post-meta-item-icon">
        <i class="far fa-folder"></i>
      </span>
      <span class="post-meta-item-text">分类于</span>
        <span itemprop="about" itemscope itemtype="http://schema.org/Thing">
          <a href="/categories/programming/" itemprop="url" rel="index"><span itemprop="name">算法与硬件</span></a>
        </span>
    </span>

  
</div>

        </div>
      </header>

    
    
    
    <div class="post-body" itemprop="articleBody">
          <!--

`今天可以带薪写博客，开心`

先炫耀一下我已经给 [4 个](https://github.com/pulls?q=is%3Apr+author%3Aduchengyao+archived%3Afalse+is%3Aclosed+is%3Apublic+is%3Amerged) 大型项目贡献过代码，包括`深度学习框架`、`3D 打印机固件` 和 `FastDDS`
![](http://qiniu.s1nh.org/blog_pull-requests.png)

-->

<h3 id="1-通过-git-squash-合并分支"><a href="#1-通过-git-squash-合并分支" class="headerlink" title="1. 通过 git squash 合并分支"></a>1. 通过 git squash 合并分支</h3><p>有的项目要求一个 commit 必须包含完整的功能，但在开发时通常会提交很多细粒度的 commit，比如 <code>add test</code> <code>clean code</code> 等。这种情况下可以使用 <code>git squash</code> 将多个 commit 压缩，得到干净的主分支。</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line">git merge --squash tmp</span><br><span class="line">git commit -m &quot;squash tmp&quot;</span><br><span class="line"></span><br><span class="line"># In the following graph, G is c--d--e--f--g squashed together</span><br><span class="line"></span><br><span class="line">          X-------------G stable</span><br><span class="line">         /</span><br><span class="line">a---b---c---d---e---f---g tmp</span><br></pre></td></tr></table></figure>


<h3 id="2-调试被-squash-后的代码"><a href="#2-调试被-squash-后的代码" class="headerlink" title="2. 调试被 squash 后的代码"></a>2. 调试被 squash 后的代码</h3><p>squash 的优点是可以得到简洁的 commit 记录，但缺失详细的 commit 记录会对后面 debug 造成一些影响。</p>
<p>比如，使用FastDDS后，我一直在调试<a target="_blank" rel="noopener" href="https://github.com/eProsima/Fast-DDS/issues/2811">一个无法重连的bug</a>，通过 log 可以定位到这个 bug 是在一次 <a target="_blank" rel="noopener" href="https://github.com/eProsima/Fast-DDS/pull/1187">2000 行的 commit</a> 引入的。如果现在开始读这两千行代码肯定会浪费很多时间。</p>
<p>现在要借助 github，在 pull request 页面可以找到详细的 23 个 commit 记录，并定位到引入 bug 的 commit：</p>
<p><img data-src="http://qiniu.s1nh.org/blog_git-squash.png"></p>
<p>为了防止这个 commit 不完整，我们需要手动下载引入 bug 的代码，和引入 bug 之前的代码，分别做一次回归测试。（手动下载代码的原因是，这些 commit ID 不在 git repo 里，无法 checkout）</p>
<p>在 master 里改完 bug 以后，为了防止引入新 bug，别忘了跑回归测试。</p>

      
    </div>

    
    
    

    <footer class="post-footer">
        <div class="post-eof"></div>
      
    </footer>
  </article>
</div>




    


<div class="post-block">
  
  

  <article itemscope itemtype="http://schema.org/Article" class="post-content" lang="">
    <link itemprop="mainEntityOfPage" href="http://s1nh.org/post/fastdds-shm/">

    <span hidden itemprop="author" itemscope itemtype="http://schema.org/Person">
      <meta itemprop="image" content="/images/avatar.jpg">
      <meta itemprop="name" content="S1NH">
    </span>

    <span hidden itemprop="publisher" itemscope itemtype="http://schema.org/Organization">
      <meta itemprop="name" content="S1NH">
      <meta itemprop="description" content="no other developers required.">
    </span>

    <span hidden itemprop="post" itemscope itemtype="http://schema.org/CreativeWork">
      <meta itemprop="name" content="undefined | S1NH">
      <meta itemprop="description" content="">
    </span>
      <header class="post-header">
        <h2 class="post-title" itemprop="name headline">
          <a href="/post/fastdds-shm/" class="post-title-link" itemprop="url">FastDDS 特定情况下 subscriber 无法重连</a>
        </h2>

        <div class="post-meta-container">
          <div class="post-meta">
    <span class="post-meta-item">
      <span class="post-meta-item-icon">
        <i class="far fa-calendar"></i>
      </span>
      <span class="post-meta-item-text">发表于</span>

      <time title="创建时间：2022-09-05 10:57:32" itemprop="dateCreated datePublished" datetime="2022-09-05T10:57:32+08:00">2022-09-05</time>
    </span>
    <span class="post-meta-item">
      <span class="post-meta-item-icon">
        <i class="far fa-folder"></i>
      </span>
      <span class="post-meta-item-text">分类于</span>
        <span itemprop="about" itemscope itemtype="http://schema.org/Thing">
          <a href="/categories/programming/" itemprop="url" rel="index"><span itemprop="name">算法与硬件</span></a>
        </span>
    </span>

  
</div>

        </div>
      </header>

    
    
    
    <div class="post-body" itemprop="articleBody">
          <blockquote>
<p>刚开始用 FastDDS 的时候就发现这个问题，原以为是共享内存 deadlock 了，于是就有了前面关于 boost 鲁棒锁的那篇帖子。但问题并没有这么简单 &gt;_&lt;<br>这个问题在 <a target="_blank" rel="noopener" href="https://github.com/eProsima/Fast-DDS/issues/2811">Github/eProsima/Fast-DDS#2811</a> 有详细记录。 </p>
</blockquote>
<p>对 FastDDS 程序进行 debug 时，将 subscriber 暂停，等一会再重启，subscriber将无法再次接收数据。Publisher / Subscriber 的日志如下</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line">Publisher</span><br><span class="line">2022-09-06 14:10:47.049 [RTPS_TRANSPORT_SHM Warning] SHM Port 7413 failure: the port is marked as not ok! -&gt; Function try_push</span><br><span class="line">2022-09-06 14:10:47.049 [RTPS_TRANSPORT_SHM Warning] (ID:140091162883648) Existing Port 7413 (5f4eeb5613a33705) NOT Healthy. -&gt; Function open_port_internal</span><br><span class="line">2022-09-06 14:10:47.049 [RTPS_TRANSPORT_SHM Warning] (ID:140091162883648) Port 7413 (5f4eeb5613a33705) Removed. -&gt; Function open_port_internal</span><br><span class="line">Message: HelloWorld with index: 157 SENT</span><br><span class="line">2022-09-06 14:10:47.246 [RTPS_TRANSPORT_SHM Warning] SHM Port 7412 failure: the port is marked as not ok! -&gt; Function try_push</span><br><span class="line">2022-09-06 14:10:47.248 [RTPS_TRANSPORT_SHM Warning] (ID:140091402036800) Existing Port 7412 (3e1fa9f9eb2b0ade) NOT Healthy. -&gt; Function open_port_internal</span><br><span class="line">2022-09-06 14:10:47.248 [RTPS_TRANSPORT_SHM Warning] (ID:140091402036800) Port 7412 (3e1fa9f9eb2b0ade) Removed. -&gt; Function open_port_internal</span><br></pre></td></tr></table></figure>

<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">Subscriber</span><br><span class="line">2022-09-07 14:50:27.441 [RTPS_TRANSPORT_SHM Warning] (ID:140737325877056) Port 7412 Zombie. Reset the port -&gt; Function open_port_internal</span><br><span class="line">2022-09-07 14:50:27.442 [RTPS_TRANSPORT_SHM Warning] (ID:140737325877056) Port 7413 Zombie. Reset the port -&gt; Function open_port_internal</span><br></pre></td></tr></table></figure>

<p>查看 log 对应的代码，最后定位到可能出现问题的 commit 在 <a target="_blank" rel="noopener" href="https://github.com/eProsima/Fast-DDS/commit/e58dcb17e6732b827b18056520c1137b807d800f">eProsima/Fast-DDS@e58dcb1</a>。</p>
<p>这个 commit 是 Pull Request 时将几十个 commit squash 在一起的[<a target="_blank" rel="noopener" href="https://github.com/eProsima/Fast-DDS/pull/1187/commits">链接</a>]。squash 前的 commit 在 github 可以查看，但用 git 命令是无法 checkout 的，所以手动下载了一堆源码编译，二分查找了一下，最后定位在下面这个 commit:</p>
<blockquote>
<p><a target="_blank" rel="noopener" href="https://github.com/eProsima/Fast-DDS/pull/1187/commits/0b8af27cbed21143ececcf34a968d2fbc8d84cff">Refs #8250. Do not reuse zombie ports structures.</a><br>@adolfomarver authored and @MiguelCompany committed on May 12, 2020</p>
</blockquote>
<p>问题看起来像是 Subscriber 拒绝复用 zombie ports，但又没申请新的 port.<br>注释了几行代码，可以暂时避免这个问题，参考 <a target="_blank" rel="noopener" href="https://github.com/duchengyao/Fast-DDS/commit/63ad6686d25cb80556e7f2bc101eb39734146729">duchengyao@Fast-DDS/commit/63ad668</a></p>
<!--
**其它**
分配的每个缓冲区意味着两个内部分配：节点和有效负载。每个内部分配消耗“per_allocation_extra_size_”字节

open_or_create_and_lock_named_mutex: 
Interprocess mutex timeout when locking. Possible deadlock: owner died without unlocking?
try to remove and create again

-->

      
    </div>

    
    
    

    <footer class="post-footer">
        <div class="post-eof"></div>
      
    </footer>
  </article>
</div>




    


<div class="post-block">
  
  

  <article itemscope itemtype="http://schema.org/Article" class="post-content" lang="">
    <link itemprop="mainEntityOfPage" href="http://s1nh.org/post/boost-robustness-interprocess-mutex-deadlock/">

    <span hidden itemprop="author" itemscope itemtype="http://schema.org/Person">
      <meta itemprop="image" content="/images/avatar.jpg">
      <meta itemprop="name" content="S1NH">
    </span>

    <span hidden itemprop="publisher" itemscope itemtype="http://schema.org/Organization">
      <meta itemprop="name" content="S1NH">
      <meta itemprop="description" content="no other developers required.">
    </span>

    <span hidden itemprop="post" itemscope itemtype="http://schema.org/CreativeWork">
      <meta itemprop="name" content="undefined | S1NH">
      <meta itemprop="description" content="">
    </span>
      <header class="post-header">
        <h2 class="post-title" itemprop="name headline">
          <a href="/post/boost-robustness-interprocess-mutex-deadlock/" class="post-title-link" itemprop="url">boost::interprocess 新版本修复了死锁</a>
        </h2>

        <div class="post-meta-container">
          <div class="post-meta">
    <span class="post-meta-item">
      <span class="post-meta-item-icon">
        <i class="far fa-calendar"></i>
      </span>
      <span class="post-meta-item-text">发表于</span>

      <time title="创建时间：2022-08-06 09:45:50" itemprop="dateCreated datePublished" datetime="2022-08-06T09:45:50+08:00">2022-08-06</time>
    </span>
    <span class="post-meta-item">
      <span class="post-meta-item-icon">
        <i class="far fa-folder"></i>
      </span>
      <span class="post-meta-item-text">分类于</span>
        <span itemprop="about" itemscope itemtype="http://schema.org/Thing">
          <a href="/categories/programming/" itemprop="url" rel="index"><span itemprop="name">算法与硬件</span></a>
        </span>
    </span>

  
</div>

        </div>
      </header>

    
    
    
    <div class="post-body" itemprop="articleBody">
          <ul>
<li><code>Boost</code> 是一个开源 C++ 算法库，是官方认证的对标准 C++ 的扩充（有点类似 python 的 anaconda）。C++ 15 / 17 等新版本有很多特性也会参考 boost 库；</li>
<li><code>boost:Interprocess</code> 实现了<strong>进程间通信</strong>功能，包括<strong>共享内存</strong>、内存映射文件、信号量、文件锁、消息队列等；</li>
<li><code>共享内存</code> 指可被多个进程存取的内存，被用作进程间的通信。</li>
</ul>
<p>boost::interprocess 在 1.78 版本之前如果进程崩溃可能导致死锁。从18年就有人提出这个issue，21年才修复。<br>最简单的复现方法是执行三遍下面的代码：</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line">#include &quot;boost/interprocess/managed_shared_memory.hpp&quot;</span><br><span class="line"></span><br><span class="line">int main() &#123;</span><br><span class="line">  boost::interprocess::managed_shared_memory managed_shm&#123;</span><br><span class="line">      boost::interprocess::open_or_create, &quot;Boost&quot;, 1024</span><br><span class="line">  &#125;;</span><br><span class="line">  int* i = managed_shm.construct&lt;int&gt;(&quot;Int&quot;)(99);</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<ul>
<li>第一遍在共享内存中创建 Boost 文件，并写入一个 Key 为 Int 的变量 99；</li>
<li>第二遍尝试再次写入时发现已经有这个Key了，写不进去。程序崩溃，并抛出异常：<br><code>terminate called after throwing an instance of &#39;boost::interprocess::interprocess_exception&#39;</code><br><code>what():  boost::interprocess_exception::library_error</code></li>
<li>第三遍因为上次的崩溃时没有释放锁，程序死锁；</li>
<li>新版本的 boost 在第三次执行程序的时候会不会死锁，抛出异常 ：<br><code>terminate called after throwing an instance of &#39;boost::interprocess::lock_exception&#39;</code><br><code>what():  boost::interprocess::lock_exception</code></li>
</ul>
<p>原因在<a target="_blank" rel="noopener" href="https://github.com/boostorg/interprocess/commit/7c8893788d3823615d6ddbfd125d2ad153817111#diff-334412084c0f3abf945468528eb917ebe6a4ae50c59d7ae3c672f1e402c96bd4R44-R49">这几行</a>，如果不想更新boost，改那几行也可以。</p>
<p>如果编译器支持 <code>_POSIX_C_SOURCE &gt;= 200809L</code>，在构造锁的时候判断 <code>pthread_mutexattr_setrobust(&amp;m_attr, PTHREAD_MUTEX_ROBUST) != 0</code>。</p>
<p>pthread_mutexattr_setrobust 的说明在<a target="_blank" rel="noopener" href="https://man7.org/linux/man-pages/man3/pthread_mutexattr_setrobust.3.html">这里</a></p>

      
    </div>

    
    
    

    <footer class="post-footer">
        <div class="post-eof"></div>
      
    </footer>
  </article>
</div>




    


<div class="post-block">
  
  

  <article itemscope itemtype="http://schema.org/Article" class="post-content" lang="">
    <link itemprop="mainEntityOfPage" href="http://s1nh.org/post/fastdds-zerocopy-for-multiple-readers/">

    <span hidden itemprop="author" itemscope itemtype="http://schema.org/Person">
      <meta itemprop="image" content="/images/avatar.jpg">
      <meta itemprop="name" content="S1NH">
    </span>

    <span hidden itemprop="publisher" itemscope itemtype="http://schema.org/Organization">
      <meta itemprop="name" content="S1NH">
      <meta itemprop="description" content="no other developers required.">
    </span>

    <span hidden itemprop="post" itemscope itemtype="http://schema.org/CreativeWork">
      <meta itemprop="name" content="undefined | S1NH">
      <meta itemprop="description" content="">
    </span>
      <header class="post-header">
        <h2 class="post-title" itemprop="name headline">
          <a href="/post/fastdds-zerocopy-for-multiple-readers/" class="post-title-link" itemprop="url">FastDDS 零拷贝模式下多个 subscriber 的原理</a>
        </h2>

        <div class="post-meta-container">
          <div class="post-meta">
    <span class="post-meta-item">
      <span class="post-meta-item-icon">
        <i class="far fa-calendar"></i>
      </span>
      <span class="post-meta-item-text">发表于</span>

      <time title="创建时间：2022-07-27 23:01:39" itemprop="dateCreated datePublished" datetime="2022-07-27T23:01:39+08:00">2022-07-27</time>
    </span>
    <span class="post-meta-item">
      <span class="post-meta-item-icon">
        <i class="far fa-folder"></i>
      </span>
      <span class="post-meta-item-text">分类于</span>
        <span itemprop="about" itemscope itemtype="http://schema.org/Thing">
          <a href="/categories/programming/" itemprop="url" rel="index"><span itemprop="name">算法与硬件</span></a>
        </span>
    </span>

  
</div>

        </div>
      </header>

    
    
    
    <div class="post-body" itemprop="articleBody">
          <p>FastDDS 新推出的零拷贝 (Zero Copy) 模式有很多难以理解的地方，在这里会持续做些整理。</p>
<p><strong>目录</strong></p>
<ol>
<li>如何使用 ZeroCopy？</li>
<li>ZeroCopy 理论上 <code>subscriber</code> 和 <code>publisher</code> 会使用同一个内存地址，为什么打印出来的地址不同？</li>
<li>ZeroCopy 会分配多少空间，什么时候覆盖旧的样本？</li>
<li><code>qos.history().depth</code> 与 <code>qos.resource_limits().max_samples/extra_samples</code> 什么关系？</li>
</ol>
          <!--noindex-->
            <div class="post-button">
              <a class="btn" href="/post/fastdds-zerocopy-for-multiple-readers/#more" rel="contents">
                阅读全文 &raquo;
              </a>
            </div>
          <!--/noindex-->
        
      
    </div>

    
    
    

    <footer class="post-footer">
        <div class="post-eof"></div>
      
    </footer>
  </article>
</div>




    


<div class="post-block">
  
  

  <article itemscope itemtype="http://schema.org/Article" class="post-content" lang="">
    <link itemprop="mainEntityOfPage" href="http://s1nh.org/post/fix-apt-mirror-error/">

    <span hidden itemprop="author" itemscope itemtype="http://schema.org/Person">
      <meta itemprop="image" content="/images/avatar.jpg">
      <meta itemprop="name" content="S1NH">
    </span>

    <span hidden itemprop="publisher" itemscope itemtype="http://schema.org/Organization">
      <meta itemprop="name" content="S1NH">
      <meta itemprop="description" content="no other developers required.">
    </span>

    <span hidden itemprop="post" itemscope itemtype="http://schema.org/CreativeWork">
      <meta itemprop="name" content="undefined | S1NH">
      <meta itemprop="description" content="">
    </span>
      <header class="post-header">
        <h2 class="post-title" itemprop="name headline">
          <a href="/post/fix-apt-mirror-error/" class="post-title-link" itemprop="url">apt mirror DEP-11 64x64@2 Icons 404 Not Found</a>
        </h2>

        <div class="post-meta-container">
          <div class="post-meta">
    <span class="post-meta-item">
      <span class="post-meta-item-icon">
        <i class="far fa-calendar"></i>
      </span>
      <span class="post-meta-item-text">发表于</span>

      <time title="创建时间：2022-07-20 18:18:03" itemprop="dateCreated datePublished" datetime="2022-07-20T18:18:03+08:00">2022-07-20</time>
    </span>
    <span class="post-meta-item">
      <span class="post-meta-item-icon">
        <i class="far fa-folder"></i>
      </span>
      <span class="post-meta-item-text">分类于</span>
        <span itemprop="about" itemscope itemtype="http://schema.org/Thing">
          <a href="/categories/programming/" itemprop="url" rel="index"><span itemprop="name">算法与硬件</span></a>
        </span>
    </span>

  
</div>

        </div>
      </header>

    
    
    
    <div class="post-body" itemprop="articleBody">
          <p>目前使用 apt-mirror 会缺少文件，比如：</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">Err:18 http://mymirror.blah:80/ubuntu bionic/main DEP-11 64x64@2 Icons 404 Not Found [IP: *.*.*.* 80]</span><br><span class="line">Err:64 http://mymirror.blah:80/ubuntu bionic-updates/main DEP-11 64x64@2 Icons 404 Not Found [IP: *.*.*.* 80]</span><br></pre></td></tr></table></figure>

<p>需要使用下面的脚本修复。</p>
          <!--noindex-->
            <div class="post-button">
              <a class="btn" href="/post/fix-apt-mirror-error/#more" rel="contents">
                阅读全文 &raquo;
              </a>
            </div>
          <!--/noindex-->
        
      
    </div>

    
    
    

    <footer class="post-footer">
        <div class="post-eof"></div>
      
    </footer>
  </article>
</div>




    


<div class="post-block">
  
  

  <article itemscope itemtype="http://schema.org/Article" class="post-content" lang="">
    <link itemprop="mainEntityOfPage" href="http://s1nh.org/post/config-for-sermoonv1/">

    <span hidden itemprop="author" itemscope itemtype="http://schema.org/Person">
      <meta itemprop="image" content="/images/avatar.jpg">
      <meta itemprop="name" content="S1NH">
    </span>

    <span hidden itemprop="publisher" itemscope itemtype="http://schema.org/Organization">
      <meta itemprop="name" content="S1NH">
      <meta itemprop="description" content="no other developers required.">
    </span>

    <span hidden itemprop="post" itemscope itemtype="http://schema.org/CreativeWork">
      <meta itemprop="name" content="undefined | S1NH">
      <meta itemprop="description" content="">
    </span>
      <header class="post-header">
        <h2 class="post-title" itemprop="name headline">
          <a href="/post/config-for-sermoonv1/" class="post-title-link" itemprop="url">逆向了 SermoonV1 的 CR-FDM-v2.4.S1.200 主板</a>
        </h2>

        <div class="post-meta-container">
          <div class="post-meta">
    <span class="post-meta-item">
      <span class="post-meta-item-icon">
        <i class="far fa-calendar"></i>
      </span>
      <span class="post-meta-item-text">发表于</span>

      <time title="创建时间：2022-07-02 19:01:01" itemprop="dateCreated datePublished" datetime="2022-07-02T19:01:01+08:00">2022-07-02</time>
    </span>
    <span class="post-meta-item">
      <span class="post-meta-item-icon">
        <i class="far fa-folder"></i>
      </span>
      <span class="post-meta-item-text">分类于</span>
        <span itemprop="about" itemscope itemtype="http://schema.org/Thing">
          <a href="/categories/programming/" itemprop="url" rel="index"><span itemprop="name">算法与硬件</span></a>
        </span>
    </span>

  
</div>

        </div>
      </header>

    
    
    
    <div class="post-body" itemprop="articleBody">
          <blockquote>
<p>上一篇文章吐槽了 <code>创想三维 Sermoon V1</code> 的缺点，其中包括不开源的主板。我花了几天时间逆向，得到了主板的配置文件。<br>使用此配置文件可以自行编译固件：开启 Lineradvance、加入 BLTouch 自动调平、降低待机时风扇的噪声。<br>新的配置文件在 <a target="_blank" rel="noopener" href="https://github.com/Klipper3d/klipper/pull/5621">Klipper3d/klipper#5621</a><br><strong>官方已经开源了 <a target="_blank" rel="noopener" href="https://github.com/CrealityOfficial/Sermoon-V1">CrealityOfficial/Sermoon-V1</a></strong></p>
<p>另外，文章最后提供一个散热套件的模型。</p>
</blockquote>
<p><img data-src="http://qiniu.s1nh.org/sermoon_v1_board_diagram.png-QNthin"></p>
          <!--noindex-->
            <div class="post-button">
              <a class="btn" href="/post/config-for-sermoonv1/#more" rel="contents">
                阅读全文 &raquo;
              </a>
            </div>
          <!--/noindex-->
        
      
    </div>

    
    
    

    <footer class="post-footer">
        <div class="post-eof"></div>
      
    </footer>
  </article>
</div>




    


<div class="post-block">
  
  

  <article itemscope itemtype="http://schema.org/Article" class="post-content" lang="">
    <link itemprop="mainEntityOfPage" href="http://s1nh.org/post/do-not-buy-sermoon-v1/">

    <span hidden itemprop="author" itemscope itemtype="http://schema.org/Person">
      <meta itemprop="image" content="/images/avatar.jpg">
      <meta itemprop="name" content="S1NH">
    </span>

    <span hidden itemprop="publisher" itemscope itemtype="http://schema.org/Organization">
      <meta itemprop="name" content="S1NH">
      <meta itemprop="description" content="no other developers required.">
    </span>

    <span hidden itemprop="post" itemscope itemtype="http://schema.org/CreativeWork">
      <meta itemprop="name" content="undefined | S1NH">
      <meta itemprop="description" content="">
    </span>
      <header class="post-header">
        <h2 class="post-title" itemprop="name headline">
          <a href="/post/do-not-buy-sermoon-v1/" class="post-title-link" itemprop="url">不推荐购买创想三维 Creality Sermoon V1 的几个理由</a>
        </h2>

        <div class="post-meta-container">
          <div class="post-meta">
    <span class="post-meta-item">
      <span class="post-meta-item-icon">
        <i class="far fa-calendar"></i>
      </span>
      <span class="post-meta-item-text">发表于</span>

      <time title="创建时间：2022-05-30 21:07:14" itemprop="dateCreated datePublished" datetime="2022-05-30T21:07:14+08:00">2022-05-30</time>
    </span>
    <span class="post-meta-item">
      <span class="post-meta-item-icon">
        <i class="far fa-folder"></i>
      </span>
      <span class="post-meta-item-text">分类于</span>
        <span itemprop="about" itemscope itemtype="http://schema.org/Thing">
          <a href="/categories/programming/" itemprop="url" rel="index"><span itemprop="name">算法与硬件</span></a>
        </span>
    </span>

  
</div>

        </div>
      </header>

    
    
    
    <div class="post-body" itemprop="articleBody">
          <blockquote>
<p>看过 [<a target="_blank" rel="noopener" href="https://www.zhihu.com/zvideo/1457409894764335104">阿文君的视频</a>] 买了 <code>Sermoon V1</code>。体验过后感觉比较玩具、拓展性也比较差，在这里提出几个不该买的理由。</p>
</blockquote>
          <!--noindex-->
            <div class="post-button">
              <a class="btn" href="/post/do-not-buy-sermoon-v1/#more" rel="contents">
                阅读全文 &raquo;
              </a>
            </div>
          <!--/noindex-->
        
      
    </div>

    
    
    

    <footer class="post-footer">
        <div class="post-eof"></div>
      
    </footer>
  </article>
</div>




    


<div class="post-block">
  
  

  <article itemscope itemtype="http://schema.org/Article" class="post-content" lang="">
    <link itemprop="mainEntityOfPage" href="http://s1nh.org/post/alfa-romeo-enable-race-mode/">

    <span hidden itemprop="author" itemscope itemtype="http://schema.org/Person">
      <meta itemprop="image" content="/images/avatar.jpg">
      <meta itemprop="name" content="S1NH">
    </span>

    <span hidden itemprop="publisher" itemscope itemtype="http://schema.org/Organization">
      <meta itemprop="name" content="S1NH">
      <meta itemprop="description" content="no other developers required.">
    </span>

    <span hidden itemprop="post" itemscope itemtype="http://schema.org/CreativeWork">
      <meta itemprop="name" content="undefined | S1NH">
      <meta itemprop="description" content="">
    </span>
      <header class="post-header">
        <h2 class="post-title" itemprop="name headline">
          <a href="/post/alfa-romeo-enable-race-mode/" class="post-title-link" itemprop="url">阿尔法罗密欧零成本自制 Race 模式开关，关闭牵引力控制和 ESP</a>
        </h2>

        <div class="post-meta-container">
          <div class="post-meta">
    <span class="post-meta-item">
      <span class="post-meta-item-icon">
        <i class="far fa-calendar"></i>
      </span>
      <span class="post-meta-item-text">发表于</span>

      <time title="创建时间：2022-05-03 15:44:45" itemprop="dateCreated datePublished" datetime="2022-05-03T15:44:45+08:00">2022-05-03</time>
    </span>
    <span class="post-meta-item">
      <span class="post-meta-item-icon">
        <i class="far fa-folder"></i>
      </span>
      <span class="post-meta-item-text">分类于</span>
        <span itemprop="about" itemscope itemtype="http://schema.org/Thing">
          <a href="/categories/%E8%B5%9B%E8%BD%A6/" itemprop="url" rel="index"><span itemprop="name">赛车</span></a>
        </span>
    </span>

  
</div>

        </div>
      </header>

    
    
    
    <div class="post-body" itemprop="articleBody">
          <iframe src="//player.bilibili.com/player.html?aid=768548375&bvid=BV1jr4y1n7eE&cid=587367830&page=1" scrolling="no" border="0" frameborder="no" framespacing="0" allowfullscreen="true"> </iframe>

<p>阿尔法罗密欧的四叶草（Quadrifoglio）版本具有 Race 模式，在此模式下打开双模式排气，停用 ESC 稳定控制系统，同时提高油门、变速箱、制动和转向响应。</p>
<p>在普通版本的阿尔法罗密欧中，可以通过修改 Body Control Module(BCM) 的配置文件来启动隐藏的 Race 模式。</p>
<p>通常，改装 Race 模式的方法是去闲鱼购买一个四叶草版本的 DNA 开关（￥1100），远程开启隐藏功能（￥500）。这篇文章教你零成本开启此功能。</p>
          <!--noindex-->
            <div class="post-button">
              <a class="btn" href="/post/alfa-romeo-enable-race-mode/#more" rel="contents">
                阅读全文 &raquo;
              </a>
            </div>
          <!--/noindex-->
        
      
    </div>

    
    
    

    <footer class="post-footer">
        <div class="post-eof"></div>
      
    </footer>
  </article>
</div>




    


<div class="post-block">
  
  

  <article itemscope itemtype="http://schema.org/Article" class="post-content" lang="">
    <link itemprop="mainEntityOfPage" href="http://s1nh.org/post/a-survey-of-middleware-interface/">

    <span hidden itemprop="author" itemscope itemtype="http://schema.org/Person">
      <meta itemprop="image" content="/images/avatar.jpg">
      <meta itemprop="name" content="S1NH">
    </span>

    <span hidden itemprop="publisher" itemscope itemtype="http://schema.org/Organization">
      <meta itemprop="name" content="S1NH">
      <meta itemprop="description" content="no other developers required.">
    </span>

    <span hidden itemprop="post" itemscope itemtype="http://schema.org/CreativeWork">
      <meta itemprop="name" content="undefined | S1NH">
      <meta itemprop="description" content="">
    </span>
      <header class="post-header">
        <h2 class="post-title" itemprop="name headline">
          <a href="/post/a-survey-of-middleware-interface/" class="post-title-link" itemprop="url">百度阿波罗 和 ROS 2.0 采用的消息中间件</a>
        </h2>

        <div class="post-meta-container">
          <div class="post-meta">
    <span class="post-meta-item">
      <span class="post-meta-item-icon">
        <i class="far fa-calendar"></i>
      </span>
      <span class="post-meta-item-text">发表于</span>

      <time title="创建时间：2022-04-24 19:49:12" itemprop="dateCreated datePublished" datetime="2022-04-24T19:49:12+08:00">2022-04-24</time>
    </span>
    <span class="post-meta-item">
      <span class="post-meta-item-icon">
        <i class="far fa-folder"></i>
      </span>
      <span class="post-meta-item-text">分类于</span>
        <span itemprop="about" itemscope itemtype="http://schema.org/Thing">
          <a href="/categories/programming/" itemprop="url" rel="index"><span itemprop="name">算法与硬件</span></a>
        </span>
    </span>

  
</div>

        </div>
      </header>

    
    
    
    <div class="post-body" itemprop="articleBody">
          <blockquote>
<p>ROS 和前期的 Apollo 定义了一个 API，它向用户公开如<code>发布</code>/<code>订阅</code>等通信概念。<br>这些通信概念的实现基于自定义协议，并使用共享内存去降低基于Socket通信的开销。<br>这些传统方法存在一些问题，如每个节点以单独进程的形式存在，由底层操作系统调度，而Linux是个通用系统，每个节点的运行顺序并无任何逻辑。ROS是专用系统，任务应按照一定的业务逻辑执行。</p>
</blockquote>
<p><code>ROS 2</code> 和 <code>Apollo 3</code> 的计算框架 <code>Cyber RT</code> 构建在现有中间件解决方案 <code>DDS</code> 之上 <a name="r1" href="#1"><sup>[1]</sup></a>  <a name="r2" href="#2"><sup>[2]</sup></a> </p>
<p><code>Cyber RT</code> 在此基础上构建了自己的调度器 <a name="r3" href="#3"><sup>[3]</sup></a>，由一个多队列的<code>任务编排策略</code>调度协程（Coroutine）在 Native Thread 上有序运行。其中，Cyber RT 会动态的根据不同调度顺序的执行时间来动态的选择一个时间最短的调度策略。</p>
          <!--noindex-->
            <div class="post-button">
              <a class="btn" href="/post/a-survey-of-middleware-interface/#more" rel="contents">
                阅读全文 &raquo;
              </a>
            </div>
          <!--/noindex-->
        
      
    </div>

    
    
    

    <footer class="post-footer">
        <div class="post-eof"></div>
      
    </footer>
  </article>
</div>




    


<div class="post-block">
  
  

  <article itemscope itemtype="http://schema.org/Article" class="post-content" lang="">
    <link itemprop="mainEntityOfPage" href="http://s1nh.org/post/guitar-factory-setup-specs/">

    <span hidden itemprop="author" itemscope itemtype="http://schema.org/Person">
      <meta itemprop="image" content="/images/avatar.jpg">
      <meta itemprop="name" content="S1NH">
    </span>

    <span hidden itemprop="publisher" itemscope itemtype="http://schema.org/Organization">
      <meta itemprop="name" content="S1NH">
      <meta itemprop="description" content="no other developers required.">
    </span>

    <span hidden itemprop="post" itemscope itemtype="http://schema.org/CreativeWork">
      <meta itemprop="name" content="undefined | S1NH">
      <meta itemprop="description" content="">
    </span>
      <header class="post-header">
        <h2 class="post-title" itemprop="name headline">
          <a href="/post/guitar-factory-setup-specs/" class="post-title-link" itemprop="url">将吉他恢复为出厂设置 —— 各种型号吉他的出厂参数</a>
        </h2>

        <div class="post-meta-container">
          <div class="post-meta">
    <span class="post-meta-item">
      <span class="post-meta-item-icon">
        <i class="far fa-calendar"></i>
      </span>
      <span class="post-meta-item-text">发表于</span>

      <time title="创建时间：2022-02-10 23:10:21" itemprop="dateCreated datePublished" datetime="2022-02-10T23:10:21+08:00">2022-02-10</time>
    </span>
    <span class="post-meta-item">
      <span class="post-meta-item-icon">
        <i class="far fa-folder"></i>
      </span>
      <span class="post-meta-item-text">分类于</span>
        <span itemprop="about" itemscope itemtype="http://schema.org/Thing">
          <a href="/categories/music/" itemprop="url" rel="index"><span itemprop="name">音乐相关</span></a>
        </span>
    </span>

  
</div>

        </div>
      </header>

    
    
    
    <div class="post-body" itemprop="articleBody">
          <blockquote>
<p>调整吉他之前请换一套新琴弦，并在每一步调整完毕后给吉他重新调音。</p>
</blockquote>
          <!--noindex-->
            <div class="post-button">
              <a class="btn" href="/post/guitar-factory-setup-specs/#more" rel="contents">
                阅读全文 &raquo;
              </a>
            </div>
          <!--/noindex-->
        
      
    </div>

    
    
    

    <footer class="post-footer">
        <div class="post-eof"></div>
      
    </footer>
  </article>
</div>




    


<div class="post-block">
  
  

  <article itemscope itemtype="http://schema.org/Article" class="post-content" lang="">
    <link itemprop="mainEntityOfPage" href="http://s1nh.org/post/review-of-chatbot-framework/">

    <span hidden itemprop="author" itemscope itemtype="http://schema.org/Person">
      <meta itemprop="image" content="/images/avatar.jpg">
      <meta itemprop="name" content="S1NH">
    </span>

    <span hidden itemprop="publisher" itemscope itemtype="http://schema.org/Organization">
      <meta itemprop="name" content="S1NH">
      <meta itemprop="description" content="no other developers required.">
    </span>

    <span hidden itemprop="post" itemscope itemtype="http://schema.org/CreativeWork">
      <meta itemprop="name" content="undefined | S1NH">
      <meta itemprop="description" content="">
    </span>
      <header class="post-header">
        <h2 class="post-title" itemprop="name headline">
          <a href="/post/review-of-chatbot-framework/" class="post-title-link" itemprop="url">有关 Chatbot 基本原理、开源框架和 Rasa</a>
        </h2>

        <div class="post-meta-container">
          <div class="post-meta">
    <span class="post-meta-item">
      <span class="post-meta-item-icon">
        <i class="far fa-calendar"></i>
      </span>
      <span class="post-meta-item-text">发表于</span>

      <time title="创建时间：2021-12-17 19:57:58" itemprop="dateCreated datePublished" datetime="2021-12-17T19:57:58+08:00">2021-12-17</time>
    </span>
    <span class="post-meta-item">
      <span class="post-meta-item-icon">
        <i class="far fa-folder"></i>
      </span>
      <span class="post-meta-item-text">分类于</span>
        <span itemprop="about" itemscope itemtype="http://schema.org/Thing">
          <a href="/categories/programming/" itemprop="url" rel="index"><span itemprop="name">算法与硬件</span></a>
        </span>
    </span>

  
</div>

        </div>
      </header>

    
    
    
    <div class="post-body" itemprop="articleBody">
          <blockquote>
<p>阅读了几篇关于 Chatbot 的综述、文档，Rasa 的介绍。另外，调研了一些大厂的 Chatbot 框架，包括Google 的 <a target="_blank" rel="noopener" href="https://cloud.google.com/dialogflow/pricing">Dialogflow</a>, <a target="_blank" rel="noopener" href="https://dev.botframework.com/">Microsoft Bot</a>, <a target="_blank" rel="noopener" href="https://aws.amazon.com/lex/pricing/">AWS LEX</a>, <a target="_blank" rel="noopener" href="https://www.alixiaomi.com/">阿里小蜜</a>；和开源超过 1k stars 的框架，包括 <a target="_blank" rel="noopener" href="https://rasa.com/">Rasa</a>, <a target="_blank" rel="noopener" href="https://github.com/oyfml/opennlu">OpenNLU</a>, <a target="_blank" rel="noopener" href="https://github.com/facebookresearch/ParlAI">ParlAI</a>, <a target="_blank" rel="noopener" href="https://github.com/gunthercox/ChatterBot">ChatterBot</a>, <a target="_blank" rel="noopener" href="https://github.com/alfredfrancis/ai-chatbot-framework">ai-chatbot-framework</a>。</p>
</blockquote>
          <!--noindex-->
            <div class="post-button">
              <a class="btn" href="/post/review-of-chatbot-framework/#more" rel="contents">
                阅读全文 &raquo;
              </a>
            </div>
          <!--/noindex-->
        
      
    </div>

    
    
    

    <footer class="post-footer">
        <div class="post-eof"></div>
      
    </footer>
  </article>
</div>




    


<div class="post-block">
  
  

  <article itemscope itemtype="http://schema.org/Article" class="post-content" lang="">
    <link itemprop="mainEntityOfPage" href="http://s1nh.org/post/image-stitching-post-process/">

    <span hidden itemprop="author" itemscope itemtype="http://schema.org/Person">
      <meta itemprop="image" content="/images/avatar.jpg">
      <meta itemprop="name" content="S1NH">
    </span>

    <span hidden itemprop="publisher" itemscope itemtype="http://schema.org/Organization">
      <meta itemprop="name" content="S1NH">
      <meta itemprop="description" content="no other developers required.">
    </span>

    <span hidden itemprop="post" itemscope itemtype="http://schema.org/CreativeWork">
      <meta itemprop="name" content="undefined | S1NH">
      <meta itemprop="description" content="">
    </span>
      <header class="post-header">
        <h2 class="post-title" itemprop="name headline">
          <a href="/post/image-stitching-post-process/" class="post-title-link" itemprop="url">解决廉价摄像头在图像拼接中产生的曝光不均匀问题</a>
        </h2>

        <div class="post-meta-container">
          <div class="post-meta">
    <span class="post-meta-item">
      <span class="post-meta-item-icon">
        <i class="far fa-calendar"></i>
      </span>
      <span class="post-meta-item-text">发表于</span>

      <time title="创建时间：2021-12-15 21:01:31" itemprop="dateCreated datePublished" datetime="2021-12-15T21:01:31+08:00">2021-12-15</time>
    </span>
    <span class="post-meta-item">
      <span class="post-meta-item-icon">
        <i class="far fa-folder"></i>
      </span>
      <span class="post-meta-item-text">分类于</span>
        <span itemprop="about" itemscope itemtype="http://schema.org/Thing">
          <a href="/categories/programming/" itemprop="url" rel="index"><span itemprop="name">算法与硬件</span></a>
        </span>
    </span>

  
</div>

        </div>
      </header>

    
    
    
    <div class="post-body" itemprop="articleBody">
          <blockquote>
<p>去年把全景拼接算法部署到了郑州机场，实现 4×4K 视频采集、拼接、发布，在单个 1080ti 上可以达到 300FPS。</p>
</blockquote>
<p>因为机场光照特别强烈，使用的廉价摄像头曝光不均匀。表现为每张图片都是中间曝光强，四周曝光弱，拼接以后在接缝处会出现条纹（下图）。因为摄像头上半部分是天空，我们假设天空的亮度、颜色是统一的，可以设计一个很简单的算法解决亮度不均匀的问题。</p>
<p><img data-src="http://qiniu.s1nh.org/blog_01.origin-stitching.png-QNthin"></p>
          <!--noindex-->
            <div class="post-button">
              <a class="btn" href="/post/image-stitching-post-process/#more" rel="contents">
                阅读全文 &raquo;
              </a>
            </div>
          <!--/noindex-->
        
      
    </div>

    
    
    

    <footer class="post-footer">
        <div class="post-eof"></div>
      
    </footer>
  </article>
</div>




    


<div class="post-block">
  
  

  <article itemscope itemtype="http://schema.org/Article" class="post-content" lang="">
    <link itemprop="mainEntityOfPage" href="http://s1nh.org/post/what-string-gauges-should-you-be-playing/">

    <span hidden itemprop="author" itemscope itemtype="http://schema.org/Person">
      <meta itemprop="image" content="/images/avatar.jpg">
      <meta itemprop="name" content="S1NH">
    </span>

    <span hidden itemprop="publisher" itemscope itemtype="http://schema.org/Organization">
      <meta itemprop="name" content="S1NH">
      <meta itemprop="description" content="no other developers required.">
    </span>

    <span hidden itemprop="post" itemscope itemtype="http://schema.org/CreativeWork">
      <meta itemprop="name" content="undefined | S1NH">
      <meta itemprop="description" content="">
    </span>
      <header class="post-header">
        <h2 class="post-title" itemprop="name headline">
          <a href="/post/what-string-gauges-should-you-be-playing/" class="post-title-link" itemprop="url">如何挑选适合的电吉他琴弦规格，及关于drop调弦适用琴弦规格的问题</a>
        </h2>

        <div class="post-meta-container">
          <div class="post-meta">
    <span class="post-meta-item">
      <span class="post-meta-item-icon">
        <i class="far fa-calendar"></i>
      </span>
      <span class="post-meta-item-text">发表于</span>

      <time title="创建时间：2021-11-28 16:23:10" itemprop="dateCreated datePublished" datetime="2021-11-28T16:23:10+08:00">2021-11-28</time>
    </span>
    <span class="post-meta-item">
      <span class="post-meta-item-icon">
        <i class="far fa-folder"></i>
      </span>
      <span class="post-meta-item-text">分类于</span>
        <span itemprop="about" itemscope itemtype="http://schema.org/Thing">
          <a href="/categories/music/" itemprop="url" rel="index"><span itemprop="name">音乐相关</span></a>
        </span>
    </span>

  
</div>

        </div>
      </header>

    
    
    
    <div class="post-body" itemprop="articleBody">
          <p><code>本文大多数内容翻译自 Ernie Ball 的官方博客</code></p>
<blockquote>
<p>在知乎看到这样一个问题，因此搬运了一篇文章：<a target="_blank" rel="noopener" href="https://blog.ernieball.com/strings/what-string-gauges-should-you-be-playing/">原文链接</a><br>在练习曲目的过程中，有一些一些关于降调调弦及琴弦规格的一些问题疑问。</p>
<p>从一开始的标准调弦，到后来的drop C。自己用的琴有效弦长25.5。极限应该是dropC了，但一些喜欢的曲目需要dropB调弦，所以有这些疑问：<br>1:有效弦长25.5的琴，能否达到dropB的要求？所选用弦的规格如何挑选？<br>2:影响调弦的因素还有那些，比如跟琴本身有没有关系，打个比方，存不存在schecter的琴可以降到B而dean的琴不行？<br>3:我现在自己琴用的10-46，会不会对琴颈有影响？</p>
</blockquote>
<p><img data-src="http://qiniu.s1nh.org/ernie-ball-strings.png"></p>
          <!--noindex-->
            <div class="post-button">
              <a class="btn" href="/post/what-string-gauges-should-you-be-playing/#more" rel="contents">
                阅读全文 &raquo;
              </a>
            </div>
          <!--/noindex-->
        
      
    </div>

    
    
    

    <footer class="post-footer">
        <div class="post-eof"></div>
      
    </footer>
  </article>
</div>




    


<div class="post-block">
  
  

  <article itemscope itemtype="http://schema.org/Article" class="post-content" lang="">
    <link itemprop="mainEntityOfPage" href="http://s1nh.org/post/rx8-engine/">

    <span hidden itemprop="author" itemscope itemtype="http://schema.org/Person">
      <meta itemprop="image" content="/images/avatar.jpg">
      <meta itemprop="name" content="S1NH">
    </span>

    <span hidden itemprop="publisher" itemscope itemtype="http://schema.org/Organization">
      <meta itemprop="name" content="S1NH">
      <meta itemprop="description" content="no other developers required.">
    </span>

    <span hidden itemprop="post" itemscope itemtype="http://schema.org/CreativeWork">
      <meta itemprop="name" content="undefined | S1NH">
      <meta itemprop="description" content="">
    </span>
      <header class="post-header">
        <h2 class="post-title" itemprop="name headline">
          <a href="/post/rx8-engine/" class="post-title-link" itemprop="url">关于 MAZDA RX8 转子发动机 —— 您需要了解的所有内容</a>
        </h2>

        <div class="post-meta-container">
          <div class="post-meta">
    <span class="post-meta-item">
      <span class="post-meta-item-icon">
        <i class="far fa-calendar"></i>
      </span>
      <span class="post-meta-item-text">发表于</span>

      <time title="创建时间：2021-05-21 20:58:46" itemprop="dateCreated datePublished" datetime="2021-05-21T20:58:46+08:00">2021-05-21</time>
    </span>
    <span class="post-meta-item">
      <span class="post-meta-item-icon">
        <i class="far fa-folder"></i>
      </span>
      <span class="post-meta-item-text">分类于</span>
        <span itemprop="about" itemscope itemtype="http://schema.org/Thing">
          <a href="/categories/%E8%B5%9B%E8%BD%A6/" itemprop="url" rel="index"><span itemprop="name">赛车</span></a>
        </span>
    </span>

  
</div>

        </div>
      </header>

    
    
    
    <div class="post-body" itemprop="articleBody">
          <p><code>全文翻译自 https://www.motorverso.com/rx8-engine/</code></p>
<blockquote>
<p>谨以本文，向日本马自达公司的那些工程师们表示敬意，如果没有你们的坚持，这世上会少了一个奇迹。</p>
</blockquote>
<p><img data-src="http://qiniu.s1nh.org/blog_RX8-ENGINE-671x447.jpg"></p>
          <!--noindex-->
            <div class="post-button">
              <a class="btn" href="/post/rx8-engine/#more" rel="contents">
                阅读全文 &raquo;
              </a>
            </div>
          <!--/noindex-->
        
      
    </div>

    
    
    

    <footer class="post-footer">
        <div class="post-eof"></div>
      
    </footer>
  </article>
</div>




    


<div class="post-block">
  
  

  <article itemscope itemtype="http://schema.org/Article" class="post-content" lang="">
    <link itemprop="mainEntityOfPage" href="http://s1nh.org/post/rubber-engine-mounts-vs-polyurethane-engine-mounts/">

    <span hidden itemprop="author" itemscope itemtype="http://schema.org/Person">
      <meta itemprop="image" content="/images/avatar.jpg">
      <meta itemprop="name" content="S1NH">
    </span>

    <span hidden itemprop="publisher" itemscope itemtype="http://schema.org/Organization">
      <meta itemprop="name" content="S1NH">
      <meta itemprop="description" content="no other developers required.">
    </span>

    <span hidden itemprop="post" itemscope itemtype="http://schema.org/CreativeWork">
      <meta itemprop="name" content="undefined | S1NH">
      <meta itemprop="description" content="">
    </span>
      <header class="post-header">
        <h2 class="post-title" itemprop="name headline">
          <a href="/post/rubber-engine-mounts-vs-polyurethane-engine-mounts/" class="post-title-link" itemprop="url">是否需要升级强化底盘胶套（机脚/摆臂/连杆）？</a>
        </h2>

        <div class="post-meta-container">
          <div class="post-meta">
    <span class="post-meta-item">
      <span class="post-meta-item-icon">
        <i class="far fa-calendar"></i>
      </span>
      <span class="post-meta-item-text">发表于</span>

      <time title="创建时间：2021-05-10 20:57:21" itemprop="dateCreated datePublished" datetime="2021-05-10T20:57:21+08:00">2021-05-10</time>
    </span>
    <span class="post-meta-item">
      <span class="post-meta-item-icon">
        <i class="far fa-folder"></i>
      </span>
      <span class="post-meta-item-text">分类于</span>
        <span itemprop="about" itemscope itemtype="http://schema.org/Thing">
          <a href="/categories/other/" itemprop="url" rel="index"><span itemprop="name">其它笔记</span></a>
        </span>
    </span>

  
</div>

        </div>
      </header>

    
    
    
    <div class="post-body" itemprop="articleBody">
          <p><img data-src="http://qiniu.s1nh.org/blog_suspension_2.jpg-QNthin"></p>
<blockquote>
<p>机脚（发动机支架）负责在车架上固定和稳定发动机。为了减少发动机产生的振动，包含一个弹性的缓冲胶（机脚胶），给驾驶员创造一个更平稳，更愉快的旅程。另外，底座在发动机和车身之间起到弹簧的作用，减少了发动机的磨损。此外，发动机的噪音也会降低。随着发动机支座的磨损，通过车辆感觉到的振动量将开始增加。</p>
</blockquote>
<p>原厂机脚和底盘摆臂链接件通常是橡胶材料，某些厂家为赛车提供了聚氨酯材料的缓冲胶。橡胶和聚氨酯由于其优异的可逆弹性变形性能和良好的阻尼和能量吸收特性，在许多汽车应用中得到应用。这两种类型的支架各有优缺点，我们将在下面讨论。</p>
          <!--noindex-->
            <div class="post-button">
              <a class="btn" href="/post/rubber-engine-mounts-vs-polyurethane-engine-mounts/#more" rel="contents">
                阅读全文 &raquo;
              </a>
            </div>
          <!--/noindex-->
        
      
    </div>

    
    
    

    <footer class="post-footer">
        <div class="post-eof"></div>
      
    </footer>
  </article>
</div>




    


<div class="post-block">
  
  

  <article itemscope itemtype="http://schema.org/Article" class="post-content" lang="">
    <link itemprop="mainEntityOfPage" href="http://s1nh.org/post/tensorflow-bug2/">

    <span hidden itemprop="author" itemscope itemtype="http://schema.org/Person">
      <meta itemprop="image" content="/images/avatar.jpg">
      <meta itemprop="name" content="S1NH">
    </span>

    <span hidden itemprop="publisher" itemscope itemtype="http://schema.org/Organization">
      <meta itemprop="name" content="S1NH">
      <meta itemprop="description" content="no other developers required.">
    </span>

    <span hidden itemprop="post" itemscope itemtype="http://schema.org/CreativeWork">
      <meta itemprop="name" content="undefined | S1NH">
      <meta itemprop="description" content="">
    </span>
      <header class="post-header">
        <h2 class="post-title" itemprop="name headline">
          <a href="/post/tensorflow-bug2/" class="post-title-link" itemprop="url">「tensorflow」 Variable was uninitialized</a>
        </h2>

        <div class="post-meta-container">
          <div class="post-meta">
    <span class="post-meta-item">
      <span class="post-meta-item-icon">
        <i class="far fa-calendar"></i>
      </span>
      <span class="post-meta-item-text">发表于</span>

      <time title="创建时间：2020-10-12 12:50:35" itemprop="dateCreated datePublished" datetime="2020-10-12T12:50:35+08:00">2020-10-12</time>
    </span>
    <span class="post-meta-item">
      <span class="post-meta-item-icon">
        <i class="far fa-folder"></i>
      </span>
      <span class="post-meta-item-text">分类于</span>
        <span itemprop="about" itemscope itemtype="http://schema.org/Thing">
          <a href="/categories/programming/" itemprop="url" rel="index"><span itemprop="name">算法与硬件</span></a>
        </span>
    </span>

  
</div>

        </div>
      </header>

    
    
    
    <div class="post-body" itemprop="articleBody">
          <p>Initialize:</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line">import tensorflow as tf</span><br><span class="line">import numpy as np</span><br><span class="line"></span><br><span class="line">dir = &#x27;./model/tf_savedmodel&#x27;</span><br><span class="line">zeros = tf.constant(np.zeros([1, 640, 960, 3]), dtype=float)</span><br></pre></td></tr></table></figure>

<p>Work:</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">model = tf.saved_model.load(dir)</span><br><span class="line">output = model.signatures[&#x27;serving_default&#x27;](zeros)</span><br></pre></td></tr></table></figure>

<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">model = tf.saved_model.load(dir)</span><br><span class="line">output = model(zeros)</span><br></pre></td></tr></table></figure>

<p>Failed:</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">model = tf.saved_model.load(dir).signatures[&#x27;serving_default&#x27;]</span><br><span class="line">output = model(zeros)</span><br></pre></td></tr></table></figure>

<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line">tensorflow.python.framework.errors_impl.FailedPreconditionError:  Error while reading resource variable conv5_block17_0_bn/gamma_96932 from Container: localhost. This could mean that the variable was uninitialized. Not found: Resource localhost/conv5_block17_0_bn/gamma_96932/N10tensorflow3VarE does not exist.</span><br><span class="line">	 [[&#123;&#123;node StatefulPartitionedCall/fusion_network/conv5_block17_0_bn/ReadVariableOp&#125;&#125;]] [Op:__inference_signature_wrapper_21102]</span><br><span class="line"></span><br><span class="line">Function call stack:</span><br><span class="line">signature_wrapper</span><br></pre></td></tr></table></figure>


      
    </div>

    
    
    

    <footer class="post-footer">
        <div class="post-eof"></div>
      
    </footer>
  </article>
</div>




    


<div class="post-block">
  
  

  <article itemscope itemtype="http://schema.org/Article" class="post-content" lang="">
    <link itemprop="mainEntityOfPage" href="http://s1nh.org/post/first-impressions/">

    <span hidden itemprop="author" itemscope itemtype="http://schema.org/Person">
      <meta itemprop="image" content="/images/avatar.jpg">
      <meta itemprop="name" content="S1NH">
    </span>

    <span hidden itemprop="publisher" itemscope itemtype="http://schema.org/Organization">
      <meta itemprop="name" content="S1NH">
      <meta itemprop="description" content="no other developers required.">
    </span>

    <span hidden itemprop="post" itemscope itemtype="http://schema.org/CreativeWork">
      <meta itemprop="name" content="undefined | S1NH">
      <meta itemprop="description" content="">
    </span>
      <header class="post-header">
        <h2 class="post-title" itemprop="name headline">
          <a href="/post/first-impressions/" class="post-title-link" itemprop="url">第一印象（First Impressions）人物性格特征预测</a>
        </h2>

        <div class="post-meta-container">
          <div class="post-meta">
    <span class="post-meta-item">
      <span class="post-meta-item-icon">
        <i class="far fa-calendar"></i>
      </span>
      <span class="post-meta-item-text">发表于</span>

      <time title="创建时间：2020-10-12 12:21:18" itemprop="dateCreated datePublished" datetime="2020-10-12T12:21:18+08:00">2020-10-12</time>
    </span>
    <span class="post-meta-item">
      <span class="post-meta-item-icon">
        <i class="far fa-folder"></i>
      </span>
      <span class="post-meta-item-text">分类于</span>
        <span itemprop="about" itemscope itemtype="http://schema.org/Thing">
          <a href="/categories/programming/" itemprop="url" rel="index"><span itemprop="name">算法与硬件</span></a>
        </span>
    </span>

  
</div>

        </div>
      </header>

    
    
    
    <div class="post-body" itemprop="articleBody">
          <table>
<thead>
<tr>
<th>User</th>
<th>interview</th>
<th>agreeableness</th>
<th>conscientiousness</th>
<th>extraversion</th>
<th>neuroticism</th>
<th>openness</th>
</tr>
</thead>
<tbody><tr>
<td><a target="_blank" rel="noopener" href="https://github.com/frkngrpnr/jcs">heysky</a></td>
<td>0.920916</td>
<td>0.913731</td>
<td>0.919769</td>
<td>0.921289</td>
<td>0.914613</td>
<td>0.917014</td>
</tr>
<tr>
<td><a target="_blank" rel="noopener" href="https://github.com/hershd23/VideoModalitiesML">hershd23</a></td>
<td>0.9180</td>
<td>0.9111</td>
<td>0.9153</td>
<td>0.9150</td>
<td>0.9100</td>
<td>0.9102</td>
</tr>
<tr>
<td>baseline</td>
<td>0.916202</td>
<td>0.91123</td>
<td>0.915228</td>
<td>0.91122</td>
<td>0.910378</td>
<td>0.911123</td>
</tr>
<tr>
<td><a target="_blank" rel="noopener" href="https://github.com/Bekhouche/FirstImpressionsV2">bekhouche</a></td>
<td>0.915746</td>
<td>0.910312</td>
<td>0.913775</td>
<td>0.91551</td>
<td>0.908297</td>
<td>0.910078</td>
</tr>
<tr>
<td><a target="_blank" rel="noopener" href="https://github.com/MS1997/Apparent-personality-analysis-using-videos">*MS1997</a></td>
<td>0.9047</td>
<td>0.9075</td>
<td>0.9066</td>
<td>0.9030</td>
<td>0.9018</td>
<td>0.9046</td>
</tr>
<tr>
<td><a target="_blank" rel="noopener" href="https://github.com/ROC-HCI/chalearn_coopetition_2017">go2chayan</a></td>
<td>0.901859</td>
<td>0.903216</td>
<td>0.894914</td>
<td>0.90266</td>
<td>0.901147</td>
<td>0.904709</td>
</tr>
<tr>
<td><a target="_blank" rel="noopener" href="https://github.com/Benlamoudi/FDMB">azzasama</a></td>
<td>0.872129</td>
<td>0.891004</td>
<td>0.865975</td>
<td>0.878842</td>
<td>0.863237</td>
<td>0.874761</td>
</tr>
</tbody></table>
          <!--noindex-->
            <div class="post-button">
              <a class="btn" href="/post/first-impressions/#more" rel="contents">
                阅读全文 &raquo;
              </a>
            </div>
          <!--/noindex-->
        
      
    </div>

    
    
    

    <footer class="post-footer">
        <div class="post-eof"></div>
      
    </footer>
  </article>
</div>




    


<div class="post-block">
  
  

  <article itemscope itemtype="http://schema.org/Article" class="post-content" lang="">
    <link itemprop="mainEntityOfPage" href="http://s1nh.org/post/jetson-nano-reduce-memory-usage/">

    <span hidden itemprop="author" itemscope itemtype="http://schema.org/Person">
      <meta itemprop="image" content="/images/avatar.jpg">
      <meta itemprop="name" content="S1NH">
    </span>

    <span hidden itemprop="publisher" itemscope itemtype="http://schema.org/Organization">
      <meta itemprop="name" content="S1NH">
      <meta itemprop="description" content="no other developers required.">
    </span>

    <span hidden itemprop="post" itemscope itemtype="http://schema.org/CreativeWork">
      <meta itemprop="name" content="undefined | S1NH">
      <meta itemprop="description" content="">
    </span>
      <header class="post-header">
        <h2 class="post-title" itemprop="name headline">
          <a href="/post/jetson-nano-reduce-memory-usage/" class="post-title-link" itemprop="url">「Jetson Nano」 Reduce Memory Usage</a>
        </h2>

        <div class="post-meta-container">
          <div class="post-meta">
    <span class="post-meta-item">
      <span class="post-meta-item-icon">
        <i class="far fa-calendar"></i>
      </span>
      <span class="post-meta-item-text">发表于</span>

      <time title="创建时间：2020-10-12 12:17:16" itemprop="dateCreated datePublished" datetime="2020-10-12T12:17:16+08:00">2020-10-12</time>
    </span>
    <span class="post-meta-item">
      <span class="post-meta-item-icon">
        <i class="far fa-folder"></i>
      </span>
      <span class="post-meta-item-text">分类于</span>
        <span itemprop="about" itemscope itemtype="http://schema.org/Thing">
          <a href="/categories/programming/" itemprop="url" rel="index"><span itemprop="name">算法与硬件</span></a>
        </span>
    </span>

  
</div>

        </div>
      </header>

    
    
    
    <div class="post-body" itemprop="articleBody">
          <blockquote>
<p>Nano 的4G内存太小了（最近还出来一个2G版nano &gt;_&lt;），模型跑不动的患者可以通过以下几个步骤减少内存消耗。</p>
</blockquote>
<p><strong>1. 关闭用户图形界面</strong><br>sudo systemctl set-default multi-user.target<br>sudo reboot</p>
<p>开启用户图形界面<br>sudo systemctl set-default graphical.target<br>sudo reboot</p>
<p><strong>2. 切换图形界面</strong><br>默认图形界面为Unity，Ubuntu 18 系统自带Gnome3，可切换到 lxde 以节约内存。</p>
<ul>
<li>GNOME3 :1047M</li>
<li>Unity: 517M</li>
<li>xfce: 247M</li>
<li>lxde: 214M</li>
</ul>
<p><strong>3. 关闭 dockerd 节约 49M</strong></p>

      
    </div>

    
    
    

    <footer class="post-footer">
        <div class="post-eof"></div>
      
    </footer>
  </article>
</div>




  <nav class="pagination">
    <span class="page-number current">1</span><a class="page-number" href="/page/2/">2</a><span class="space">&hellip;</span><a class="page-number" href="/page/4/">4</a><a class="extend next" rel="next" href="/page/2/"><i class="fa fa-angle-right" aria-label="下一页"></i></a>
  </nav>

</div>
  </main>

  <footer class="footer">
    <div class="footer-inner">


<div class="copyright">
  &copy; 2015 – 
  <span itemprop="copyrightYear">2023</span>
  <span class="with-love">
    <i class="fa fa-heart"></i>
  </span>
  <span class="author" itemprop="copyrightHolder">S1NH</span>
</div>
<div class="busuanzi-count">
    <span class="post-meta-item" id="busuanzi_container_site_uv">
      <span class="post-meta-item-icon">
        <i class="fa fa-user"></i>
      </span>
      <span class="site-uv" title="总访客量">
        <span id="busuanzi_value_site_uv"></span>
      </span>
    </span>
    <span class="post-meta-item" id="busuanzi_container_site_pv">
      <span class="post-meta-item-icon">
        <i class="fa fa-eye"></i>
      </span>
      <span class="site-pv" title="总访问量">
        <span id="busuanzi_value_site_pv"></span>
      </span>
    </span>
</div>
  <div class="powered-by">由 <a href="https://hexo.io/" rel="noopener" target="_blank">Hexo</a> & <a href="https://theme-next.js.org/" rel="noopener" target="_blank">NexT.Gemini</a> 强力驱动
  </div>

    </div>
  </footer>

  
  <script src="https://cdnjs.cloudflare.com/ajax/libs/animejs/3.2.1/anime.min.js" integrity="sha256-XL2inqUJaslATFnHdJOi9GfQ60on8Wx1C2H8DYiN1xY=" crossorigin="anonymous"></script>
  <script src="https://cdnjs.cloudflare.com/ajax/libs/jquery/3.6.0/jquery.min.js" integrity="sha256-/xUj+3OJU5yExlq6GSYGSHk7tPXikynS7ogEvDej/m4=" crossorigin="anonymous"></script>
  <script src="https://cdnjs.cloudflare.com/ajax/libs/fancybox/3.5.7/jquery.fancybox.min.js" integrity="sha256-yt2kYMy0w8AbtF89WXb2P1rfjcP/HTHLT7097U8Y5b8=" crossorigin="anonymous"></script>
  <script src="https://cdnjs.cloudflare.com/ajax/libs/lozad.js/1.16.0/lozad.min.js" integrity="sha256-mOFREFhqmHeQbXpK2lp4nA3qooVgACfh88fpJftLBbc=" crossorigin="anonymous"></script>
<script src="/js/comments.js"></script><script src="/js/utils.js"></script><script src="/js/next-boot.js"></script>

  
<script src="https://cdnjs.cloudflare.com/ajax/libs/hexo-generator-searchdb/1.4.0/search.js" integrity="sha256-vXZMYLEqsROAXkEw93GGIvaB2ab+QW6w3+1ahD9nXXA=" crossorigin="anonymous"></script>
<script src="/js/third-party/search/local-search.js"></script>


  <script class="next-config" data-name="mermaid" type="application/json">{"enable":true,"theme":{"light":"default","dark":"dark"},"js":{"url":"https://cdnjs.cloudflare.com/ajax/libs/mermaid/9.1.3/mermaid.min.js","integrity":"sha256-TIYL00Rhw/8WaoUhYTLX9SKIEFdXxg+yMWSLVUbhiLg="}}</script>
  <script src="/js/third-party/tags/mermaid.js"></script>

  <script src="/js/third-party/fancybox.js"></script>


  
  <script async src="https://busuanzi.ibruce.info/busuanzi/2.3/busuanzi.pure.mini.js"></script>




  

  <script class="next-config" data-name="enableMath" type="application/json">true</script><script class="next-config" data-name="mathjax" type="application/json">{"enable":true,"tags":"none","js":{"url":"https://cdnjs.cloudflare.com/ajax/libs/mathjax/3.2.2/es5/tex-mml-chtml.js","integrity":"sha256-MASABpB4tYktI2Oitl4t+78w/lyA+D7b/s9GEP0JOGI="}}</script>
<script src="/js/third-party/math/mathjax.js"></script>


<script class="next-config" data-name="utterances" type="application/json">{"enable":true,"repo":"duchengyao/duchengyao.github.io","issue_term":"og:title","theme":"github-light"}</script>
<script src="/js/third-party/comments/utterances.js"></script>

</body>
</html>
